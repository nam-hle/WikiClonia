{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/pages/wiki/index.js","webpack:///./src/components/WikiApp/normalize.css","webpack:///./src/components/WikiApp/style3.scss","webpack:///./src/components/WikiApp/style.sass","webpack:///./src/components/WikiApp/Tooltip/style.sass","webpack:///./src/components/WikiApp/Menu/style.sass","webpack:///./src/components/WikiApp/Navigation/style.sass","webpack:///./src/WikiWrapper/index.js","webpack:///./src/hooks/useWiki.js","webpack:///./src/hooks/useFetch.js","webpack:///./src/components/WikiApp/Article/index.js","webpack:///./src/wiki_parser/elements.js","webpack:///./src/wiki_parser/utils.js","webpack:///./src/components/WikiApp/index.js","webpack:///./src/components/WikiApp/Content/index.js","webpack:///./src/components/WikiApp/Elements/index.js","webpack:///./src/components/WikiApp/Tooltip/index.js","webpack:///./src/wiki_parser/index.js","webpack:///./src/wiki_parser/analyser.js","webpack:///./src/components/WikiApp/Menu/index.js","webpack:///./src/asset/images/search.svg","webpack:///./src/asset/images/profile.svg","webpack:///./src/components/WikiApp/Navigation/index.js","webpack:///./src/asset/images/left.svg","webpack:///./src/asset/images/right.svg"],"names":["ReactDOM","render","document","getElementById","parseWikiText","response","main","parse","wikitext","buildURL","params","URLSearchParams","format","origin","pageContentParams","title","action","prop","page","imageParams","limit","titles","generator","gimlimit","iiprop","summaryParams","exsentences","exintro","explaintext","exsectionformat","redirects","usePageContent","useState","pageContent","setPageContent","pageContentFetcher","useFetch","useEffect","useImages","images","setImages","imageFetch","imgs","query","pages","res","key","imageinfo","url","width","height","options","setResponse","error","setError","isLoading","setIsLoading","fetchData","fetch","json","ImagesContext","React","createContext","Article","toggle","addEventListener","e","preventDefault","body","classList","contains","remove","add","replace","children","headings","Comment","elementName","startToken","endToken","allowedChildren","Break","selfClose","BoldItalic","Bold","Italic","Gallery","Link","ExternalLink","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","Reference","Template","BlockQuote","PairPipe","Global","push","tasteStr","s","t","i","substr","length","capitalizeFirst","string","charAt","toUpperCase","slice","capitalize","toLowerCase","trimQuote","str","clean","obj","value","Array","isArray","Object","keys","App","Content","content","map","element","index","Text","text","splitText","setSplitText","paragraphs","split","Heading","className","id","heading","useRef","WikiLink","displayText","props","type","attribute","subType","publisher","accessdate","JSON","stringify","Element","renderChildren","valueImages","useContext","float","multipleImage","indexOf","caption","referenceIndex","extractSummary","maxchar","extract","normalized","to","Tooltip","show","setShow","summary","setSummary","setTitle","handleMouseIn","handleMouseOut","then","console","marginTop","marginBottom","Children","toArray","UNITS","convert","list","ABBR_UNITS","unit","abbr","createTextElement","CiteParser","plain","R_CITE","exec","groups","remain","pair","equalIndex","trim","ConvertParser","toMetric","fromUnit","from","possibilities","toUnit","fromSystem","describe","system","toAbbr","test","lower","singular","plural","tokens","numbers","answer","shift","toFixed","ReferenceParser","refname","refgroup","match","R_HEAD","R_GROUP","R_NAME","R_FIRSTUSE","FootnoteParser","fnGroup","fnName","R_FOOTNOTE","GalleryParser","R_GALLERY","attr","attributes","R_PAIR","image","parsePairPipe","nextIndex","parsedPlain","R_KEY","MultipleImageParser","R_MULTIPLE_IMAGES","R_KEY_IMAGE","pairs","imageKey","imageID","undefined","supType","InfoboxParser","R_INFO","subtype","sections","section","InternalLinkParser","R_ARTICLE","fullUrl","nonePipe","trailingPipe","suffixStr","namespace","disambiguation","rootUrl","urlMatch","chunks","first","R_MEDIA","meta","R_OPTION","R_ATTRIBUTE","chunk","join","TemplateParser","ExternalLinkParer","R_EXTERNAL","Error","internalParse","strlen","targetElement","opts","buffer","has","nextElement","nextPlain","hasSelfClose","matchElement","catchEndToken","eToken","nowiki","analyseHeadings","getLevel","currentLevel","currentHeading","indices","level","headingText","headingId","childrenHeadings","parentHeading","parent","grandParent","Menu","Navigation","headingsRef","handle","direction","current","scrollWidth","pos","scrollLeft","visibleWidth","clientWidth","maxPos","slideWidth","log","querySelector","Math","min","max","handle2","button","navigation","getElementsByClassName","offsetWidth","offsetLeft","buttonWidth","buttonPosition","navigationClientWidth","navigationScrollLeft","buttonMin","buttonMax","windowMin","windowMax","delta","scrollTop","offsetTop","offsetHeight"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;;;;;;;;;;;;;;ACvJA;AACA;AACA;AAEA;AACA;AACA;AAEAA,gDAAQ,CAACC,MAAT,CAAgB,2DAAC,mEAAD,OAAhB,EAAyBC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAzB,E;;;;;;;ACRA;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;ACNL;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;ACNL;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;ACNL;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;ACNL;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;ACNL;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNL;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,QAAQ;AAAA;;AAAA,SAAIC,iEAAI,CAACD,QAAD,aAACA,QAAD,0CAACA,QAAQ,CAAEE,KAAX,6EAAC,gBAAiBC,QAAlB,0DAAC,sBAA4B,GAA5B,CAAD,CAAR;AAAA,CAA9B;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,MAAM;AAAA,SACrB,wCACA,IAAIC,eAAJ,mBAAyBD,MAAzB;AAAiCE,UAAM,EAAE,MAAzC;AAAiDC,UAAM,EAAE;AAAzD,KAFqB;AAAA,CAAvB;;AAIA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,KAAK;AAAA,SAAK;AAClCC,UAAM,EAAE,OAD0B;AAElCC,QAAI,EAAE,UAF4B;AAGlCC,QAAI,EAAEH;AAH4B,GAAL;AAAA,CAA/B;;AAMA,IAAMI,WAAW,GAAG,SAAdA,WAAc,CAACJ,KAAD;AAAA,MAAQK,KAAR,uEAAgB,GAAhB;AAAA,SAAyB;AAC3CJ,UAAM,EAAE,OADmC;AAE3CC,QAAI,EAAE,WAFqC;AAG3CI,UAAM,EAAEN,KAHmC;AAI3CO,aAAS,EAAE,QAJgC;AAK3CC,YAAQ,EAAEH,KALiC;AAM3CI,UAAM,EAAE;AANmC,GAAzB;AAAA,CAApB;;AASA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAV,KAAK;AAAA,SAAK;AAC9BC,UAAM,EAAE,OADsB;AAE9BC,QAAI,EAAE,UAFwB;AAG9BS,eAAW,EAAE,CAHiB;AAI9BC,WAAO,EAAE,IAJqB;AAK9BC,eAAW,EAAE,IALiB;AAM9BC,mBAAe,EAAE,OANa;AAO9BC,aAAS,EAAE,CAPmB;AAQ9BT,UAAM,EAAEN;AARsB,GAAL;AAAA,CAA3B;;AAWA;;;;;;;;;;0BAhCMX,a;0BAEAK,Q;0BAIAK,iB;0BAMAK,W;0BASAM,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBN;AACA;AAMA;;AAEA,IAAMM,cAAc,GAAG,SAAjBA,cAAiB,CAAAhB,KAAK,EAAI;AAAA,kBACQiB,sDAAQ,CAAC,IAAD,CADhB;AAAA;AAAA,MACvBC,WADuB;AAAA,MACVC,cADU;;AAE9B,MAAMC,kBAAkB,GAAGC,oEAAQ,CAAC3B,qEAAQ,CAACK,8EAAiB,CAACC,KAAD,CAAlB,CAAT,CAAnC;AACAsB,yDAAS,CAAC,YAAM;AACdH,kBAAc,CAAC9B,0EAAa,CAAC+B,kBAAkB,CAAC9B,QAApB,CAAd,CAAd;AACD,GAFQ,EAEN,CAAC8B,kBAAkB,CAAC9B,QAApB,CAFM,CAAT;AAGA,SAAO4B,WAAP;AACD,CAPD;;cAAMF,c;UAEuBK,4D;;;AAO7B,IAAME,SAAS,GAAG,SAAZA,SAAY,CAAAvB,KAAK,EAAI;AAAA,mBACGiB,sDAAQ,CAAC,IAAD,CADX;AAAA;AAAA,MAClBO,MADkB;AAAA,MACVC,SADU;;AAEzB,MAAMC,UAAU,GAAGL,oEAAQ,CAAC3B,qEAAQ,CAACU,wEAAW,CAACJ,KAAD,CAAZ,CAAT,CAA3B;AACAsB,yDAAS,CAAC,YAAM;AAAA;;AACd,QAAIK,IAAI,2BAAGD,UAAU,CAACpC,QAAd,kFAAG,qBAAqBsC,KAAxB,0DAAG,sBAA4BC,KAAvC;AAAA,QACEC,GAAG,GAAG,EADR,CADc,CAGd;;AACA,SAAK,IAAMC,GAAX,IAAkBJ,IAAlB,EAAwB;AAAA;;AAAA,8CACOA,IAAI,CAACI,GAAD,CADX,qEACO,UAAWC,SADlB,wDACO,oBAAuB,CAAvB,CADP;AAAA,UAChBC,GADgB,wBAChBA,GADgB;AAAA,UACXC,KADW,wBACXA,KADW;AAAA,UACJC,MADI,wBACJA,MADI;;AAEtBL,SAAG,CAACH,IAAI,CAACI,GAAD,CAAJ,CAAU/B,KAAX,CAAH,GAAuB;AAAEiC,WAAG,EAAHA,GAAF;AAAOC,aAAK,EAALA,KAAP;AAAcC,cAAM,EAANA;AAAd,OAAvB;AACD;;AACDV,aAAS,CAACK,GAAD,CAAT;AACD,GATQ,EASN,CAACJ,UAAU,CAACpC,QAAZ,CATM,CAAT;AAUA,SAAOkC,MAAP;AACD,CAdD;;cAAMD,S;UAEeF,4D;;;AAcrB;;;;;;;;;;0BAzBML,c;0BASAO,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBN;;AAEA,IAAMF,QAAQ,GAAG,SAAXA,QAAW,CAACY,GAAD,EAAuB;AAAA,MAAjBG,OAAiB,uEAAP,EAAO;;AAAA,kBACNnB,sDAAQ,CAAC,IAAD,CADF;AAAA;AAAA,MAC/B3B,QAD+B;AAAA,MACrB+C,WADqB;;AAAA,mBAEZpB,sDAAQ,CAAC,IAAD,CAFI;AAAA;AAAA,MAE/BqB,KAF+B;AAAA,MAExBC,QAFwB;;AAAA,mBAGJtB,sDAAQ,CAAC,KAAD,CAHJ;AAAA;AAAA,MAG/BuB,SAH+B;AAAA,MAGpBC,YAHoB;;AAKtCnB,yDAAS,CAAC,YAAM;AACd,QAAMoB,SAAS;AAAA,qLAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAChBD,4BAAY,CAAC,IAAD,CAAZ;AADgB;AAAA;AAAA,uBAGIE,KAAK,CAACV,GAAD,EAAMG,OAAN,CAHT;;AAAA;AAGRN,mBAHQ;AAAA;AAAA,uBAIKA,GAAG,CAACc,IAAJ,EAJL;;AAAA;AAIRA,oBAJQ;AAKdP,2BAAW,CAACO,IAAD,CAAX;AACAH,4BAAY,CAAC,KAAD,CAAZ;AANc;AAAA;;AAAA;AAAA;AAAA;AAQdF,wBAAQ,aAAR;;AARc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAATG,SAAS;AAAA;AAAA;AAAA,OAAf;;AAWAA,aAAS;AACV,GAbQ,EAaN,EAbM,CAAT;AAeA,SAAO;AAAEpD,YAAQ,EAARA,QAAF;AAAYgD,SAAK,EAALA,KAAZ;AAAmBE,aAAS,EAATA;AAAnB,GAAP;AACD,CArBD;;cAAMnB,Q;;eAuBSA,Q;AAAA;;;;;;;;;;0BAvBTA,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFN;AACA;AACA;AACA;AACA;AACA;CAGA;AACA;;AAEO,IAAMwB,aAAa,GAAGC,4CAAK,CAACC,aAAN,CAAoB,IAApB,CAAtB,C,CAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAAe;AAAA,MAAZhD,KAAY,QAAZA,KAAY;AAC7BA,OAAK,GAAGA,KAAK,IAAI,eAAjB;AACA,MAAMkB,WAAW,GAAGF,gFAAc,CAAChB,KAAD,CAAlC;AACA,MAAMwB,MAAM,GAAGD,2EAAS,CAACvB,KAAD,CAAxB;AAEA8C,8CAAK,CAACxB,SAAN,CAAgB,YAAM;AACpB,QAAI2B,MAAM,GAAG9D,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CAAb;AAEA6D,UAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEC,gBAAR,CAAyB,OAAzB,EAAkC,UAASC,CAAT,EAAY;AAC5CA,OAAC,CAACC,cAAF;;AACA,UAAIjE,QAAQ,CAACkE,IAAT,CAAcC,SAAd,CAAwBC,QAAxB,CAAiC,OAAjC,CAAJ,EAA+C;AAC7CpE,gBAAQ,CAACkE,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+B,OAA/B;AACD,OAFD,MAEO;AACLrE,gBAAQ,CAACkE,IAAT,CAAcC,SAAd,CAAwBG,GAAxB,CAA4B,OAA5B;AACD;AACF,KAPD;AAQD,GAXD,EAWG,EAXH;AAaA,SACE,2DAAC,aAAD,CAAe,QAAf;AAAwB,SAAK,EAAE;AAAEjC,YAAM,EAANA;AAAF;AAA/B,KACE,2DAAC,8CAAD,QACE,2DAAC,qDAAD,OADF,EAEE,2DAAC,oEAAD;AAAe,SAAK,EAAC;AAArB,KACE;AAAK,aAAS,EAAC;AAAf,KACE;AAAK,aAAS,EAAC;AAAf,KACE;AAAK,aAAS,EAAC;AAAf,KAA8BxB,KAAK,CAAC0D,OAAN,CAAc,IAAd,EAAoB,GAApB,CAA9B,CADF,EAEE;AAAK,aAAS,EAAC;AAAf,6CAFF,EAKE,2DAAC,wDAAD;AAAS,WAAO,EAAExC,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEyC;AAA/B,IALF,CADF,CADF,CAFF,EAcE,2DAAC,2DAAD;AAAY,YAAQ,EAAEzC,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAE0C;AAAnC,IAdF,CADF,CADF;AAoBD,CAtCD;;cAAMZ,O;UAEgBhC,wE,EACLO,mE;;;eAqCFyB,O;AAAA,mE,CAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;0BAhEaH,a;0BAWPG,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBN,IAAMa,OAAO,GAAG;AACZC,aAAW,EAAE,SADD;AAEZC,YAAU,EAAE,MAFA;AAGZC,UAAQ,EAAE,CAAC,KAAD,CAHE;AAIZC,iBAAe,EAAE;AAJL,CAAhB;AAAA,IAMEC,KAAK,GAAG;AACNJ,aAAW,EAAE,OADP;AAENC,YAAU,EAAE,QAFN;AAGNC,UAAQ,EAAE,EAHJ;AAINC,iBAAe,EAAE,EAJX;AAKNE,WAAS,EAAE;AALL,CANV;AAAA,IAaEC,UAAU,GAAG;AACXN,aAAW,EAAE,YADF;AAEXC,YAAU,EAAE,OAFD;AAGXC,UAAQ,EAAE,CAAC,OAAD,CAHC;AAIXC,iBAAe,EAAE;AAJN,CAbf;AAAA,IAmBEI,IAAI,GAAG;AACLP,aAAW,EAAE,MADR;AAELC,YAAU,EAAE,KAFP;AAGLC,UAAQ,EAAE,CAAC,KAAD,CAHL;AAILC,iBAAe,EAAE;AAJZ,CAnBT;AAAA,IAyBEK,MAAM,GAAG;AACPR,aAAW,EAAE,QADN;AAEPC,YAAU,EAAE,IAFL;AAGPC,UAAQ,EAAE,CAAC,IAAD,CAHH;AAIPC,iBAAe,EAAE;AAJV,CAzBX;AAAA,IA+BEM,OAAO,GAAG;AACRT,aAAW,EAAE,SADL;AAERC,YAAU,EAAE,UAFJ;AAGRC,UAAQ,EAAE,CAAC,YAAD,CAHF;AAIRC,iBAAe,EAAE;AAJT,CA/BZ;AAAA,IAqCEO,IAAI,GAAG;AACLV,aAAW,EAAE,MADR;AAELC,YAAU,EAAE,IAFP;AAGLC,UAAQ,EAAE,CAAC,IAAD,CAHL;AAILC,iBAAe,EAAE,CAACI,IAAD,EAAOC,MAAP;AAJZ,CArCT;AAAA,IA2CEG,YAAY,GAAG;AACbX,aAAW,EAAE,cADA;AAEbC,YAAU,EAAE,GAFC;AAGbC,UAAQ,EAAE,CAAC,GAAD,CAHG;AAIbC,iBAAe,EAAE;AAJJ,CA3CjB;AAAA,IAiDES,QAAQ,GAAG;AACTZ,aAAW,EAAE,UADJ;AAETC,YAAU,EAAE,IAFH;AAGTC,UAAQ,EAAE,CAAC,IAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAjDb;AAAA,IAuDEU,QAAQ,GAAG;AACTb,aAAW,EAAE,UADJ;AAETC,YAAU,EAAE,KAFH;AAGTC,UAAQ,EAAE,CAAC,KAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAvDb;AAAA,IA6DEW,QAAQ,GAAG;AACTd,aAAW,EAAE,UADJ;AAETC,YAAU,EAAE,MAFH;AAGTC,UAAQ,EAAE,CAAC,MAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CA7Db;AAAA,IAmEEY,QAAQ,GAAG;AACTf,aAAW,EAAE,UADJ;AAETC,YAAU,EAAE,OAFH;AAGTC,UAAQ,EAAE,CAAC,OAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAnEb;AAAA,IAyEEa,QAAQ,GAAG;AACThB,aAAW,EAAE,UADJ;AAETC,YAAU,EAAE,QAFH;AAGTC,UAAQ,EAAE,CAAC,QAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAzEb;AAAA,IA+EEc,QAAQ,GAAG;AACTjB,aAAW,EAAE,UADJ;AAETC,YAAU,EAAE,SAFH;AAGTC,UAAQ,EAAE,CAAC,SAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CA/Eb;AAAA,IAqFEe,SAAS,GAAG;AACVlB,aAAW,EAAE,WADH;AAEVC,YAAU,EAAE,MAFF;AAGVC,UAAQ,EAAE,CAAC,QAAD,EAAW,IAAX,CAHA;AAIVC,iBAAe,EAAE;AAJP,CArFd;AAAA,IA2FEgB,QAAQ,GAAG;AACTnB,aAAW,EAAE,UADJ;AAETC,YAAU,EAAE,IAFH;AAGTC,UAAQ,EAAE,CAAC,IAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CA3Fb;AAAA,IAiGEiB,UAAU,GAAG;AACXpB,aAAW,EAAE,aADF;AAEXC,YAAU,EAAE,cAFD;AAGXC,UAAQ,EAAE,CAAC,eAAD,CAHC;AAIXC,iBAAe,EAAE,CAACK,MAAD,EAASD,IAAT,EAAeD,UAAf;AAJN,CAjGf;AAAA,IAuGEe,QAAQ,GAAG;AACTrB,aAAW,EAAE,UADJ;AAETC,YAAU,EAAE,IAFH;AAGTC,UAAQ,EAAE,CAAC,GAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAvGb;AAAA,IA6GEmB,MAAM,GAAG;AACPtB,aAAW,EAAE,QADN;AAEPC,YAAU,EAAE,IAFL;AAGPC,UAAQ,EAAE,IAHH;AAIPC,iBAAe,EAAE,CACfJ,OADe,EAEfU,OAFe,EAGfL,KAHe,EAIfE,UAJe,EAKfC,IALe,EAMfC,MANe,EAOfE,IAPe,EAQfC,YARe,EASfM,QATe,EAUfD,QAVe,EAWfD,QAXe,EAYfD,QAZe,EAafD,QAbe,EAcfD,QAde,EAefM,SAfe,EAgBfE,UAhBe,EAiBfD,QAjBe;AAJV,CA7GX;AAsIAT,IAAI,CAACP,eAAL,CAAqBoB,IAArB,CAA0Bb,IAA1B;AACAF,MAAM,CAACL,eAAP,CAAuBoB,IAAvB,CAA4Bb,IAA5B;AACAQ,SAAS,CAACf,eAAV,CAA0BoB,IAA1B,CAA+BnB,KAA/B,EAAsCe,QAAtC;AACAA,QAAQ,CAAChB,eAAT,CAAyBoB,IAAzB,CAA8BJ,QAA9B,EAAwCD,SAAxC,EAAmDR,IAAnD;AACAW,QAAQ,CAAClB,eAAT,GAA2BmB,MAAM,CAACnB,eAAlC;AAEA;;;;;;;;;;0BA5IMJ,O;0BAMJK,K;0BAOAE,U;0BAMAC,I;0BAMAC,M;0BAMAC,O;0BAMAC,I;0BAMAC,Y;0BAMAC,Q;0BAMAC,Q;0BAMAC,Q;0BAMAC,Q;0BAMAC,Q;0BAMAC,Q;0BAMAC,S;0BAMAC,Q;0BAMAC,U;0BAMAC,Q;0BAMAC,M;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GF,IAAME,QAAQ,GAAG,SAAXA,QAAW,CAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP;AAAA,SAAaF,CAAC,CAACE,CAAD,CAAD,IAAQD,CAAC,CAAC,CAAD,CAAT,IAAgBD,CAAC,CAACG,MAAF,CAASD,CAAT,EAAYD,CAAC,CAACG,MAAd,KAAyBH,CAAtD;AAAA,CAAjB;;AAEA,IAAMI,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,MAAM;AAAA,SAC5BA,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCF,MAAM,CAACG,KAAP,CAAa,CAAb,CADL;AAAA,CAA9B;;AAGA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAJ,MAAM;AAAA,SACvBA,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCF,MAAM,CAACG,KAAP,CAAa,CAAb,EAAgBE,WAAhB,EADV;AAAA,CAAzB;;AAGA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAC,GAAG;AAAA,SACnBA,GAAG,IAAI,OAAOA,GAAG,CAAC,CAAD,CAAjB,IAAwB,OAAOA,GAAG,CAACA,GAAG,CAACT,MAAJ,GAAa,CAAd,CAAlC,GACIS,GAAG,CAACJ,KAAJ,CAAU,CAAV,EAAaI,GAAG,CAACT,MAAJ,GAAa,CAA1B,CADJ,GAEIS,GAHe;AAAA,CAArB;;AAKA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAAAC,GAAG,EAAI;AACnB,MAAIxE,GAAG,GAAG,EAAV;;AACA,OAAK,IAAMC,GAAX,IAAkBuE,GAAlB,EAAuB;AACrB,QAAIC,KAAK,GAAGD,GAAG,CAACvE,GAAD,CAAf;AACA,QACE,CAACwE,KAAD,IACCC,KAAK,CAACC,OAAN,CAAcF,KAAd,KAAwB,CAACA,KAAK,CAACZ,MADhC,IAEA,CAACe,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmBZ,MAHtB,EAKE;AACF7D,OAAG,CAACC,GAAD,CAAH,GAAWwE,KAAX;AACD;;AACD,SAAOzE,GAAP;AACD,CAbD;;AAeA;;;;;;;;;;0BA5BMwD,Q;0BAEAM,e;0BAGAK,U;0BAGAE,S;0BAKAE,K;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbN;AACA;;AACA,IAAMO,GAAG,GAAG,SAANA,GAAM,GAAM;AAChB,SAAO,2DAAC,wDAAD,OAAP;AACD,CAFD;;eAIeA,G;AAAA;;;;;;;;;;0BAJTA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFN;AACA;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAAiB;AAAA,MAAdC,OAAc,QAAdA,OAAc;AAC/B,SACE;AAAK,aAAS,EAAC;AAAf,KACGA,OAAO,GACJA,OAAO,CAACC,GAAR,CAAY,UAACC,OAAD,EAAUC,KAAV;AAAA,WACV,2DAAC,yDAAD;AAAS,SAAG,EAAEA,KAAd;AAAqB,WAAK,EAAED;AAA5B,MADU;AAAA,GAAZ,CADI,GAIJ,YALN,CADF;AASD,CAVD;;eAYeH,O;AAAA;;;;;;;;;;0BAZTA,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHN;AACA;AACA;AAEO,IAAMK,IAAI,GAAG,SAAPA,IAAO,OAAc;AAAA,MAAXC,IAAW,QAAXA,IAAW;;AAAA,kBACAlG,sDAAQ,CAAC,EAAD,CADR;AAAA;AAAA,MAC3BmG,SAD2B;AAAA,MAChBC,YADgB;;AAEhC/F,yDAAS,CAAC,YAAM;AACd,QAAIgG,UAAU,GAAGH,IAAI,CAACI,KAAL,CAAW,MAAX,CAAjB;AAAA,QACEzF,GAAG,GAAG,EADR;;AAEA,SAAK,IAAI2D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6B,UAAU,CAAC3B,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;AAC1C3D,SAAG,CAACuD,IAAJ,CAAS;AAAM,WAAG,EAAE,CAACI,CAAD,GAAK;AAAhB,SAAoB6B,UAAU,CAAC7B,CAAD,CAA9B,CAAT;;AACA,UAAIA,CAAC,GAAG6B,UAAU,CAAC3B,MAAX,GAAoB,CAA5B,EAA+B;AAC7B7D,WAAG,CAACuD,IAAJ,CAAS;AAAI,aAAG,EAAEI;AAAT,UAAT;AACD;AACF;;AACD4B,gBAAY,CAACvF,GAAD,CAAZ;AACD,GAVQ,EAUN,EAVM,CAAT;AAWA,SAAO,2DAAC,8CAAD,QAAWsF,SAAX,CAAP;AACD,CAdM;;cAAMF,I;;AAgBb,IAAMM,OAAO,GAAG,SAAVA,OAAU,QAA6B;AAAA,MAA1BC,SAA0B,SAA1BA,SAA0B;AAAA,MAAfC,EAAe,SAAfA,EAAe;AAAA,MAAXP,IAAW,SAAXA,IAAW;AAC3C,MAAMQ,OAAO,GAAG7E,4CAAK,CAAC8E,MAAN,EAAhB,CAD2C,CAG3C;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,SACE;AAAK,OAAG,EAAED,OAAV;AAAmB,aAAS,EAAEF,SAA9B;AAAyC,MAAE,EAAEC;AAA7C,KACGP,IADH,CADF;AAKD,CA/BD;;cAAMK,O;;AAiCN,IAAMK,QAAQ,GAAG,SAAXA,QAAW,QAA0B;AAAA,MAAvB5F,GAAuB,SAAvBA,GAAuB;AAAA,MAAlB6F,WAAkB,SAAlBA,WAAkB;AACzC,SACE,2DAAC,wDAAD;AAAS,OAAG,EAAE7F;AAAd,KACE;AAAG,QAAI,EAAE,mCAAmCA;AAA5C,KACG6F,WAAW,CAACf,GAAZ,CAAgB,UAAC5D,CAAD,EAAIsC,CAAJ,EAAU;AACzB,WAAO,2DAAC,OAAD;AAAS,SAAG,EAAEA,CAAd;AAAiB,WAAK,EAAEtC;AAAxB,MAAP;AACD,GAFA,CADH,CADF,CADF;AASD,CAVD;;AAYO,IAAM8B,QAAQ,GAAG,SAAXA,QAAW,QAAe;AAAA,MAAZ8C,KAAY,SAAZA,KAAY;AACrC,MAAIA,KAAK,CAACC,IAAN,IAAc,KAAd,IAAuBD,KAAK,CAACC,IAAN,IAAc,SAAzC,EAAoD,OAAO,EAAP;AADf,MAG/BC,SAH+B,GAGjBF,KAHiB,CAG/BE,SAH+B;;AAIrC,MAAIF,KAAK,CAACC,IAAN,IAAc,gBAAlB,EAAoC;AAClC,WACE;AAAK,eAAS,EAAC;AAAf,OACGD,KAAK,CAACvG,MAAN,IACCuG,KAAK,CAACvG,MAAN,CAAauF,GAAb,CAAiB,UAAC5D,CAAD,EAAIsC,CAAJ,EAAU;AACzB,aAAO,2DAAC,OAAD;AAAS,WAAG,EAAEA,CAAd;AAAiB,aAAK,EAAEtC;AAAxB,QAAP;AACD,KAFD,CAFJ,CADF;AAQD;;AACD,MAAI4E,KAAK,CAACC,IAAN,IAAc,MAAlB,EACE,OACE,2DAAC,8CAAD,QACE;AAAG,aAAS,EAAC,WAAb;AAAyB,QAAI,EAAEC,SAAS,CAAChG;AAAzC,iBACOgG,SAAS,CAACjI,KADjB,QADF,EAIG,IAJH,EAKG+H,KAAK,CAACG,OAAN,IAAiB,KAAjB,IAA0BD,SAAS,CAACE,SAApC,IACC,mFAAUF,SAAS,CAACE,SAApB,QANJ,EAQGJ,KAAK,CAACG,OAAN,IAAiB,KAAjB,IAA0BD,SAAS,CAACG,UAApC,IACC,6FAAoBH,SAAS,CAACG,UAA9B,QATJ,CADF;;AAeF,MAAIL,KAAK,CAACC,IAAN,IAAc,UAAlB,EAA8B;AAC5B,WACE;AAAK,eAAS,EAAC;AAAf,OACGD,KAAK,CAACpE,QAAN,CAAeoD,GAAf,CAAmB,UAAC5D,CAAD,EAAIsC,CAAJ;AAAA,aAClB,2DAAC,OAAD;AAAS,WAAG,EAAEA,CAAd;AAAiB,aAAK,EAAEtC;AAAxB,QADkB;AAAA,KAAnB,CADH,CADF;AAOD;;AAED,SAAO,WAAWkF,IAAI,CAACC,SAAL,CAAeP,KAAf,CAAX,GAAmC,KAA1C;AACD,CAzCM;AA2CA,IAAMQ,OAAO,GAAG,SAAVA,OAAU,QAAe;AAAA,MAAZR,KAAY,SAAZA,KAAY;AAAA,MAC9BjE,WAD8B,GACJiE,KADI,CAC9BjE,WAD8B;AAAA,MACjBH,QADiB,GACJoE,KADI,CACjBpE,QADiB;AAGpC,MAAIG,WAAW,IAAI,SAAnB,EAA8B,OAAO,EAAP;;AAE9B,MAAIA,WAAW,IAAI,cAAnB,EAAmC;AACjC,WACE;AAAG,UAAI,EAAE,mCAAmCiE,KAAK,CAAC9F;AAAlD,OACG8F,KAAK,CAACD,WADT,CADF;AAKD;;AAED,MAAIhE,WAAW,IAAI,OAAnB,EAA4B;AAC1B,WAAO,sEAAP;AACD;;AAED,MAAIA,WAAW,IAAI,MAAnB,EAA2B;AACzB,WAAO,2DAAC,IAAD;AAAM,UAAI,EAAEiE,KAAK,CAACZ;AAAlB,MAAP;AACD;;AAED,MAAIrD,WAAW,IAAI,UAAnB,EAA+B;AAC7B,WAAO,2DAAC,QAAD,EAAc;AAAEiE,WAAK,EAALA;AAAF,KAAd,CAAP;AACD;;AAED,MAAIS,cAAJ;;AACA,MAAIhC,KAAK,CAACC,OAAN,CAAc9C,QAAd,CAAJ,EAA6B;AAC3B6E,kBAAc,GAAG7E,QAAQ,CAACoD,GAAT,CAAa,UAAC5D,CAAD,EAAIsC,CAAJ;AAAA,aAAU,2DAAC,OAAD;AAAS,WAAG,EAAEA,CAAd;AAAiB,aAAK,EAAEtC;AAAxB,QAAV;AAAA,KAAb,CAAjB;AACD;;AAED,MAAIW,WAAW,IAAI,MAAnB,EAA2B;AACzB,WAAO;AAAM,eAAS,EAAC;AAAhB,OAA6B0E,cAA7B,CAAP;AACD;;AAED,MAAI1E,WAAW,IAAI,QAAnB,EAA6B;AAC3B,WAAO;AAAM,eAAS,EAAC;AAAhB,OAA+B0E,cAA/B,CAAP;AACD;;AAED,MAAI1E,WAAW,IAAI,YAAnB,EAAiC;AAC/B,WAAO;AAAM,eAAS,EAAC;AAAhB,OAAyC0E,cAAzC,CAAP;AACD;;AAED,MAAI1E,WAAW,IAAI,aAAnB,EAAkC;AAChC,WAAO,+EAAa0E,cAAb,CAAP;AACD;;AAED,MAAI1E,WAAW,CAACkC,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,KAA4B,SAAhC,EAA2C;AACzC,WAAO,2DAAC,OAAD,EAAa+B,KAAb,CAAP;AACD;;AAED,MAAIjE,WAAW,IAAI,SAAnB,EAA8B;AAC5B,WACE;AAAK,eAAS,EAAC;AAAf,OACGiE,KAAK,CAACvG,MAAN,CAAauF,GAAb,CAAiB,UAAC5D,CAAD,EAAIsC,CAAJ,EAAU;AAC1B,aAAO,2DAAC,OAAD;AAAS,WAAG,EAAEA,CAAd;AAAiB,aAAK,EAAEtC;AAAxB,QAAP;AACD,KAFA,CADH,CADF;AAOD;;AAED,MAAIW,WAAW,IAAI,MAAnB,EAA2B;AACzB,QAAIkE,IAAI,GAAGD,KAAK,CAACC,IAAjB;;AACA,QAAIA,IAAI,IAAI,UAAZ,EAAwB;AACtB,aAAO,2DAAC,QAAD;AAAU,WAAG,EAAED,KAAK,CAAC9F,GAArB;AAA0B,mBAAW,EAAE8F,KAAK,CAACD;AAA7C,QAAP;AACD;;AACD,QAAIE,IAAI,IAAI,OAAZ,EAAqB;AACnB,UAAMS,WAAW,GAAG3F,4CAAK,CAAC4F,UAAN,CAAiB7F,8DAAjB,CAApB;;AAEA,UAAIkF,KAAK,IAAIA,KAAK,CAAC9F,GAAf,IAAsBwG,WAAtB,IAAqCA,WAAW,CAACjH,MAAZ,CAAmBuG,KAAK,CAAC9F,GAAzB,CAAzC,EAAwE;AAAA;;AACtE,YAAI0G,MAAK,GACP,CAACZ,KAAK,CAACa,aAAP,IAAwB,CAAAb,KAAK,SAAL,IAAAA,KAAK,WAAL,8BAAAA,KAAK,CAAE3F,OAAP,kEAAgByG,OAAhB,CAAwB,MAAxB,KAAkC,CAAC,CAA3D,GACI,SADJ,GAEI,UAHN;;AAIA,eACE,2DAAC,8CAAD,QACE;AAAK,mBAAS,gCAAyBF,MAAzB;AAAd,WACE;AACE,YAAE,EAAEZ,KAAK,CAAC9F,GADZ;AAEE,mBAAS,EAAC,0BAFZ;AAGE,sBAAUwG,WAAW,CAACjH,MAAZ,CAAmBuG,KAAK,CAAC9F,GAAzB,EAA8BA;AAH1C,UADF,EAME;AAAK,mBAAS,EAAC;AAAf,WACG,mBAAA8F,KAAK,CAACe,OAAN,kEAAe/B,GAAf,CAAmB,UAAC5D,CAAD,EAAIsC,CAAJ;AAAA,iBAAU,2DAAC,OAAD;AAAS,eAAG,EAAEA,CAAd;AAAiB,iBAAK,EAAEtC;AAAxB,YAAV;AAAA,SAAnB,MACC,EAFJ,CANF,CADF,CADF;AAeD;AACF;AACF,GA9BD,MA8BO,IAAIW,WAAW,IAAI,WAAnB,EAAgC;AACrC,QACEiE,KAAK,CAACpE,QAAN,IACAoE,KAAK,CAACpE,QAAN,CAAegC,MADf,IAEAoC,KAAK,CAACpE,QAAN,CAAe,CAAf,EAAkBsE,SAFlB,IAGAF,KAAK,CAACpE,QAAN,CAAe,CAAf,EAAkBsE,SAAlB,CAA4BhG,GAJ9B,EAKE;AACA,aACE,wEACE;AAAG,YAAI,EAAE8F,KAAK,CAACpE,QAAN,CAAe,CAAf,EAAkBsE,SAAlB,CAA4BhG;AAArC,SAA2C8F,KAAK,CAACgB,cAAjD,CADF,CADF;AAKD;;AACD,WACE,wEACE;AAAG,UAAI,EAAEhB;AAAT,OAAiBA,KAAK,CAACgB,cAAvB,CADF,CADF;AAKD;;AACD,SAAOV,IAAI,CAACC,SAAL,CAAeP,KAAf,CAAP;AACD,CA9GM;;cAAMQ,O;;;;;;;;;;;0BAxGArB,I;0BAgBPM,O;0BAiCAK,Q;0BAYO5C,Q;0BA2CAsD,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5Gb;AACA;AACA;AACA;;AAEA,IAAMS,cAAc,GAAG,SAAjBA,cAAiB,CAACpG,IAAD,EAAyB;AAAA;;AAAA,MAAlBqG,OAAkB,uEAAR,GAAQ;AAC9C,MAAInC,OAAO,kBAAGlE,IAAI,CAAChB,KAAR,gDAAG,YAAYC,KAA1B;AAAA,MACEqH,OAAO,GAAG,IADZ;AAAA,MAEElJ,KAAK,mBAAG4C,IAAI,CAAChB,KAAR,0EAAG,aAAYuH,UAAf,oFAAG,sBAAyB,CAAzB,CAAH,2DAAG,uBAA6BC,EAFvC;;AAGA,OAAK,IAAMrH,GAAX,IAAkB+E,OAAlB;AAAA;;AAA2BoC,WAAO,mBAAGpC,OAAO,CAAC/E,GAAD,CAAV,iDAAG,aAAcmH,OAAxB;AAA3B;;AACAA,SAAO,GAAGA,OAAO,CAACxD,MAAR,CAAe,CAAf,EAAkBuD,OAAlB,IAA6B,KAAvC;AACA,SAAO;AAAEC,WAAO,EAAPA,OAAF;AAAWlJ,SAAK,EAALA;AAAX,GAAP;AACD,CAPD;;AASA,IAAMqJ,OAAO,GAAG,SAAVA,OAAU,CAAAtB,KAAK,EAAI;AAAA,MACf9F,GADe,GACG8F,KADH,CACf9F,GADe;AAAA,MACV0B,QADU,GACGoE,KADH,CACVpE,QADU;;AAAA,kBAEC1C,sDAAQ,CAAC,KAAD,CAFT;AAAA;AAAA,MAEhBqI,IAFgB;AAAA,MAEVC,OAFU;;AAAA,mBAGOtI,sDAAQ,CAAC,IAAD,CAHf;AAAA;AAAA,MAGhBuI,OAHgB;AAAA,MAGPC,UAHO;;AAAA,mBAIGxI,sDAAQ,CAAC,IAAD,CAJX;AAAA;AAAA,MAIhBjB,KAJgB;AAAA,MAIT0J,QAJS;;AAKvB,MAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,WAAMJ,OAAO,CAAC,IAAD,CAAb;AAAA,GAAtB;;AACA,MAAMK,cAAc,GAAG,SAAjBA,cAAiB;AAAA,WAAML,OAAO,CAAC,KAAD,CAAb;AAAA,GAAvB;;AAEAzG,8CAAK,CAACxB,SAAN,CAAgB,YAAM;AACpB,QAAIgI,IAAI,IAAI,CAACE,OAAb,EAAsB;AACpB7G,WAAK,CAACjD,qEAAQ,CAACgB,0EAAa,CAACuB,GAAD,CAAd,CAAT,CAAL,CACG4H,IADH,CACQ,UAAAvK,QAAQ;AAAA,eAAIA,QAAQ,CAACsD,IAAT,EAAJ;AAAA,OADhB,EAEGiH,IAFH,CAEQ,UAAAjH,IAAI,EAAI;AAAA,8BACaoG,cAAc,CAACpG,IAAD,CAD3B;AAAA,YACNsG,OADM,mBACNA,OADM;AAAA,YACGlJ,KADH,mBACGA,KADH;;AAEZyJ,kBAAU,CAACP,OAAD,CAAV;AACAQ,gBAAQ,CAAC1J,KAAK,IAAIiC,GAAV,CAAR;AACD,OANH,WAOS,UAAAK,KAAK;AAAA,eAAIwH,OAAO,CAACxH,KAAR,CAAcA,KAAd,CAAJ;AAAA,OAPd;AAQD;AACF,GAXD,EAWG,CAACgH,IAAD,CAXH;AAaA,SACE;AACE,aAAS,EAAC,SADZ;AAEE,eAAW,EAAEK,aAFf;AAGE,gBAAY,EAAEC;AAHhB,KAKGN,IAAI,IACH;AAAK,aAAS,EAAC;AAAf,KACGtJ,KAAK,GACJ;AACE,SAAK,EAAE;AAAE+J,eAAS,EAAE,CAAb;AAAgBC,kBAAY,EAAE;AAA9B,KADT;AAEE,aAAS,EAAC;AAFZ,KAIGhK,KAJH,CADI,GAQJ,2DAAC,6DAAD;AAAU,UAAM,EAAE,GAAlB;AAAuB,YAAQ,EAAE;AAAjC,IATJ,EAWGwJ,OAXH,CANJ,EAqBG1G,4CAAK,CAACmH,QAAN,CAAeC,OAAf,CAAuBvG,QAAvB,CArBH,CADF;AAyBD,CA9CD;;cAAM0F,O;;eAgDSA,O;AAAA;;;;;;;;;;0BAzDTL,c;0BASAK,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdN;AACA;AACA;CASA;;AACA,IAAMc,KAAK,GAAGC,oDAAO,GAAGC,IAAV,EAAd;AACA,IAAMC,UAAU,GAAGF,oDAAO,GACvBC,IADgB,GAEhBtD,GAFgB,CAEZ,UAAAwD,IAAI;AAAA,SAAIA,IAAI,CAACC,IAAT;AAAA,CAFQ,CAAnB;;AAIA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAtD,IAAI;AAAA,SAAK;AAAErD,eAAW,EAAE,MAAf;AAAuBqD,QAAI,EAAJA;AAAvB,GAAL;AAAA,CAA9B;;AAEA,IAAMuD,UAAU,GAAG,SAAbA,UAAa,CAAAC,KAAK,EAAI;AAC1B,MAAIC,MAAM,4BAAG,sHAAH;AAAA;AAAA;AAAA,IAAV;;AAD0B,4BAGAA,MAAM,CAACC,IAAP,CAAYF,KAAZ,EAAmBG,MAHnB;AAAA,MAGpB5C,OAHoB,uBAGpBA,OAHoB;AAAA,MAGX6C,MAHW,uBAGXA,MAHW;AAK1B,MAAI9C,SAAS,GAAG,EAAhB;;AAL0B,6CAOP8C,MAAM,CAACxD,KAAP,CAAa,GAAb,CAPO;AAAA;;AAAA;AAO1B,wDAAsC;AAAA,UAA3ByD,IAA2B;AACpC,UAAIC,UAAU,GAAGD,IAAI,CAACnC,OAAL,CAAa,GAAb,CAAjB;AADoC,iBAEjB,CACjBmC,IAAI,CAAChF,KAAL,CAAW,CAAX,EAAciF,UAAd,CADiB,EAEjBD,IAAI,CAAChF,KAAL,CAAWiF,UAAU,GAAG,CAAxB,EAA2BC,IAA3B,EAFiB,CAFiB;AAAA,UAE/BnJ,GAF+B;AAAA,UAE1BwE,KAF0B;AAMpC0B,eAAS,CAAClG,GAAD,CAAT,GAAiBwE,KAAjB;AACD;AAdyB;AAAA;AAAA;AAAA;AAAA;;AAe1B,SAAO;AAAEyB,QAAI,EAAE,MAAR;AAAgBE,WAAO,EAAPA,OAAhB;AAAyBD,aAAS,EAATA;AAAzB,GAAP;AACD,CAhBD;;AAkBA,IAAMkD,aAAa,GAAG,SAAhBA,aAAgB,CAAAR,KAAK,EAAI;AAC7B,MAAMS,QAAQ,GAAG,SAAXA,QAAW,CAAAC,QAAQ,EAAI;AAC3B,QAAIvJ,GAAG,GAAG,IAAV;;AACA,QAAI;AAAA,kDACmBsI,oDAAO,GACzBkB,IADkB,CACbD,QADa,EAElBE,aAFkB,EADnB;AAAA;;AAAA;AACF,+DAEoB;AAAA,cAFTC,OAES;AAClB,cAAIC,UAAU,GAAGrB,oDAAO,GAAGsB,QAAV,CAAmBF,OAAnB,EAA2BG,MAA5C;AACA,cAAI,YAAYF,UAAhB,EAA4B3J,GAAG,GAAG0J,OAAN;AAC7B;AANC;AAAA;AAAA;AAAA;AAAA;AAOH,KAPD,CAOE,gBAAM;AACN,aAAO,IAAP;AACD;;AACD,WAAO1J,GAAP;AACD,GAbD;;AAeA,MAAM8J,MAAM,GAAG,SAATA,MAAS,CAAAxF,GAAG,EAAI;AACpB,QAAI,WAAWyF,IAAX,CAAgBzF,GAAhB,CAAJ,EAA0B,OAAOA,GAAP;AAC1B,QAAI0F,KAAK,GAAG1F,GAAG,CAACF,WAAJ,EAAZ;;AAFoB,gDAGDiE,KAHC;AAAA;;AAAA;AAGpB,6DAA0B;AAAA,YAAfI,IAAe;AACxB,YACEA,IAAI,CAACC,IAAL,CAAUtE,WAAV,MAA2B4F,KAA3B,IACAvB,IAAI,CAACwB,QAAL,CAAc7F,WAAd,MAA+B4F,KAD/B,IAEAvB,IAAI,CAACyB,MAAL,CAAY9F,WAAZ,MAA6B4F,KAH/B,EAKE,OAAOvB,IAAI,CAACC,IAAZ;AACH;AAVmB;AAAA;AAAA;AAAA;AAAA;;AAWpB,WAAOpE,GAAP;AACD,GAZD;;AAcA,MAAI6F,MAAM,GAAGtB,KAAK,CAAC3E,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmBuB,KAAtB,mBAAV;AAAA,MACE2E,OAAO,GAAG,IADZ;AAAA,MAEEb,QAFF;AAAA,MAGEG,MAAM,GAAG,IAHX;AAAA,MAIEW,MAAM,GAAG,IAJX;AAMAF,QAAM,CAACG,KAAP;AAEAF,SAAO,GAAGD,MAAM,CAACG,KAAP,EAAV;AAEAf,UAAQ,GAAGO,MAAM,CAACK,MAAM,CAACG,KAAP,EAAD,CAAjB;;AAEA,MAAI,QAAQP,IAAR,CAAaR,QAAb,CAAJ,EAA4B;AAC1BA,YAAQ,GAAG,IAAX;AACAG,UAAM,GAAG,IAAT;AACAW,UAAM,GAAG,CAACD,OAAD,IAAY,IAAI,CAAhB,IAAqB,EAA9B;AACD,GAJD,MAIO,IAAI,QAAQL,IAAR,CAAaR,QAAb,CAAJ,EAA4B;AACjCA,YAAQ,GAAG,IAAX;AACAG,UAAM,GAAG,IAAT;AACAW,UAAM,GAAG,CAAC,CAACD,OAAD,GAAW,EAAZ,KAAmB,IAAI,CAAvB,CAAT;AACD,GAJM,MAIA;AACL,QAAID,MAAM,CAACtG,MAAP,IAAiB2E,UAAU,CAACzB,OAAX,CAAmBoD,MAAM,CAAC,CAAD,CAAzB,KAAiC,CAAC,CAAvD,EAA0D;AACxDT,YAAM,GAAGS,MAAM,CAACG,KAAP,EAAT;AACD;;AAED,QAAI,CAACZ,MAAL,EAAaA,MAAM,GAAGJ,QAAQ,CAACC,QAAD,CAAjB;;AACb,QAAIa,OAAO,IAAIV,MAAX,IAAqBH,QAAzB,EAAmC;AACjC,UAAI;AACFc,cAAM,GAAG/B,oDAAO,CAAC,CAAC8B,OAAF,CAAP,CACNZ,IADM,CACDD,QADC,EAENjC,EAFM,CAEHoC,MAFG,CAAT;AAGD,OAJD,CAIE,iBAAM;AACN,eAAO;AACL1H,qBAAW,EAAE,MADR;AAELqD,cAAI,YAAK+E,OAAL,cAAgBb,QAAhB;AAFC,SAAP;AAID;AACF;AACF;;AAEDc,QAAM,GAAGA,MAAM,GAAGA,MAAM,CAACE,OAAP,CAAe,CAAf,CAAH,GAAuB,IAAtC;;AACA,MAAIhB,QAAQ,IAAIG,MAAZ,IAAsBW,MAAM,KAAK,IAArC,EAA2C;AACzC,WAAO;AACLrI,iBAAW,EAAE,MADR;AAELqD,UAAI,YAAK+E,OAAL,cAAgBb,QAAhB,eAA6Bc,MAA7B,cAAuCX,MAAvC;AAFC,KAAP;AAID;;AAED,SAAO;AACL1H,eAAW,EAAE,MADR;AAELqD,QAAI,YAAK+E,OAAL,cAAgBb,QAAhB;AAFC,GAAP;AAID,CAlFD;;AAoFA,IAAMiB,eAAe,GAAG,SAAlBA,eAAkB,CAAA3B,KAAK,EAAI;AAC/B,MAAI4B,OAAJ;AAAA,MACEC,QADF;AAAA,MAEE7I,QAFF;AAAA,MAGE8I,KAHF;AAAA,MAIE1B,MAAM,GAAGJ,KAJX,CAD+B,CAO/B;;AACA,MAAM+B,MAAM,4BAAG,oCAAH;AAAA;AAAA,IAAZ;;AACA,MAAI,CAACD,KAAK,GAAGC,MAAM,CAAC7B,IAAP,CAAYF,KAAZ,CAAT,MAAiC,IAArC,EACE,MAAM,6BAA6BA,KAAnC;AAEFI,QAAM,GAAG0B,KAAK,CAAC3B,MAAN,CAAaC,MAAtB,CAZ+B,CAc/B;;AACA,MAAM4B,OAAO,4BAAG,2KAAH;AAAA;AAAA;AAAA,IAAb;;AACA,MAAI,CAACF,KAAK,GAAGE,OAAO,CAAC9B,IAAR,CAAaE,MAAb,CAAT,MAAmC,IAAvC,EAA6C;AAAA,wBACnB0B,KAAK,CAAC3B,MADa;AACxCC,UADwC,iBACxCA,MADwC;AAChCyB,YADgC,iBAChCA,QADgC;AAE3CA,YAAQ,GAAGrG,iEAAS,CAACqG,QAAD,CAApB;AACD,GAnB8B,CAqB/B;;;AACA,MAAMI,MAAM,4BAAG,uKAAH;AAAA;AAAA;AAAA,IAAZ;;AACA,MAAI,CAACH,KAAK,GAAGG,MAAM,CAAC/B,IAAP,CAAYE,MAAZ,CAAT,MAAkC,IAAtC,EAA4C;AAAA,yBACnB0B,KAAK,CAAC3B,MADa;AACvCC,UADuC,kBACvCA,MADuC;AAC/BwB,WAD+B,kBAC/BA,OAD+B;AAE1CA,WAAO,GAAGpG,iEAAS,CAACoG,OAAD,CAAnB;AACD,GA1B8B,CA4B/B;;;AACA,MAAI,WAAW1B,IAAX,CAAgBE,MAAhB,CAAJ,EAA6B;AAC3B,WAAO;AAAE/C,UAAI,EAAE,OAAR;AAAiBuE,aAAO,EAAPA,OAAjB;AAA0BC,cAAQ,EAARA;AAA1B,KAAP;AACD,GA/B8B,CAiC/B;;;AACA,MAAMK,UAAU,4BAAG,4BAAH;AAAA;AAAA,IAAhB;;AACA,MAAI,CAACJ,KAAK,GAAGI,UAAU,CAAChC,IAAX,CAAgBE,MAAhB,CAAT,MAAsC,IAA1C,EAAgD;AAC9C,UAAM,8BAA8BA,MAApC;AACD;;AAEDpH,UAAQ,GAAGpE,IAAI,CAACkN,KAAK,CAAC3B,MAAN,CAAanH,QAAd,CAAJ,CAA4BA,QAAvC;AACA4I,SAAO,GAAGpG,iEAAS,CAACoG,OAAD,CAAnB;AACAC,UAAQ,GAAGrG,iEAAS,CAACqG,QAAD,CAApB;AAEA,SAAO;AAAExE,QAAI,EAAE,UAAR;AAAoBuE,WAAO,EAAPA,OAApB;AAA6BC,YAAQ,EAARA,QAA7B;AAAuC7I,YAAQ,EAARA;AAAvC,GAAP;AACD,CA5CD;;AA8CA,IAAMmJ,cAAc,GAAG,SAAjBA,cAAiB,CAAAnC,KAAK,EAAI;AAC9B,MAAI8B,KAAJ;AAAA,MACE1B,MADF;AAAA,MAEEgC,OAFF;AAAA,MAGEC,MAHF;AAAA,MAIE9E,OAJF;AAAA,MAKEvE,QALF;AAAA,MAMEqE,IAAI,GAAG,UANT,CAD8B,CAS9B;;AACA,MAAMiF,UAAU,4BAAG,+CAAH;AAAA;AAAA;AAAA,IAAhB;;AACA,MAAI,CAACR,KAAK,GAAGQ,UAAU,CAACpC,IAAX,CAAgBF,KAAhB,CAAT,MAAqC,IAAzC,EAA+C,MAAM,gBAAN;AAXjB,uBAYP8B,KAAK,CAAC3B,MAZC;AAY3B5C,SAZ2B,kBAY3BA,OAZ2B;AAYlB6C,QAZkB,kBAYlBA,MAZkB;;AAc9B;AACA,MAAM4B,OAAO,4BAAG,mGAAH;AAAA;AAAA;AAAA,IAAb;;AACA,MAAI,CAACF,KAAK,GAAGE,OAAO,CAAC9B,IAAR,CAAaE,MAAb,CAAT,MAAmC,IAAvC,EAA6C;AAAA,yBACpB0B,KAAK,CAAC3B,MADc;AACxCiC,WADwC,kBACxCA,OADwC;AAC/BhC,UAD+B,kBAC/BA,MAD+B;AAE5C,GAlB6B,CAoB9B;;;AACA,MAAM6B,MAAM,4BAAG,qGAAH;AAAA;AAAA;AAAA,IAAZ;;AACA,MAAI,CAACH,KAAK,GAAGG,MAAM,CAAC/B,IAAP,CAAYE,MAAZ,CAAT,MAAkC,IAAtC,EAA4C;AAAA,yBACpB0B,KAAK,CAAC3B,MADc;AACvCkC,UADuC,kBACvCA,MADuC;AAC/BjC,UAD+B,kBAC/BA,MAD+B;AAE3C,GAxB6B,CA0B9B;;;AACApH,UAAQ,GAAGoH,MAAM,GAAGxL,IAAI,CAACwL,MAAD,CAAJ,CAAapH,QAAhB,GAA2B,EAA5C,CA3B8B,CA6B9B;;AACA,SAAO;AAAEqE,QAAI,EAAJA,IAAF;AAAQE,WAAO,EAAPA,OAAR;AAAiB8E,UAAM,EAANA,MAAjB;AAAyBD,WAAO,EAAPA,OAAzB;AAAkCpJ,YAAQ,EAARA;AAAlC,GAAP;AACD,CA/BD;;AAiCA,IAAMuJ,aAAa,GAAG,SAAhBA,aAAgB,CAAAvC,KAAK,EAAI;AAC7B,MAAMwC,SAAS,4BAAG,6HAAH;AAAA;AAAA;AAAA,IAAf;;AACA,MAAIV,KAAJ;AAAA,MACEW,IADF;AAAA,MAEEtG,OAFF;AAAA,MAGEuG,UAAU,GAAG,EAHf;AAIA,MAAI,CAACZ,KAAK,GAAGU,SAAS,CAACtC,IAAV,CAAeF,KAAf,CAAT,MAAoC,IAAxC,EACE,MAAM,yBAAyBA,KAA/B;AAP2B,uBASR8B,KAAK,CAAC3B,MATE;AAS1BsC,MAT0B,kBAS1BA,IAT0B;AASpBtG,SAToB,kBASpBA,OAToB;;AAW7B,MAAMwG,MAAM,4BAAG,gKAAH;AAAA;AAAA;AAAA,IAAZ;;AAEA,SAAO,CAACb,KAAK,GAAGa,MAAM,CAACzC,IAAP,CAAYuC,IAAZ,CAAT,MAAgC,IAAvC,EAA6C;AAAA,yBACtBX,KAAK,CAAC3B,MADgB;AAAA,QACrC/I,GADqC,kBACrCA,GADqC;AAAA,QAChCwE,KADgC,kBAChCA,KADgC;AAE3C8G,cAAU,CAACtL,GAAD,CAAV,GAAkBoE,iEAAS,CAACI,KAAD,CAA3B;AACD;;AAED,MAAI/E,MAAM,GAAG,EAAb;;AAlB6B,8CAmBXsF,OAAO,CAACS,KAAR,CAAc,IAAd,CAnBW;AAAA;;AAAA;AAmB7B,2DAAuC;AAAA,UAA9BgG,KAA8B;AACrC,UAAI,SAAS1C,IAAT,CAAc0C,KAAd,CAAJ,EAA0B;AAC1BA,WAAK,GAAG,qBAAqB1C,IAArB,CAA0B0C,KAA1B,EAAiC,CAAjC,CAAR;AACA/L,YAAM,CAAC6D,IAAP,CAAY9F,IAAI,aAAMgO,KAAN,QAAJ,CAAqB5J,QAArB,CAA8B,CAA9B,CAAZ;AACD;AAvB4B;AAAA;AAAA;AAAA;AAAA;;AAwB7B,SAAO;AAAE0J,cAAU,EAAVA,UAAF;AAAc7L,UAAM,EAANA;AAAd,GAAP;AACD,CAzBD;;AA2BA,IAAMgM,aAAa,GAAG,SAAhBA,aAAgB,CAAA7C,KAAK,EAAI;AAC7B,MAAI7I,GAAG,GAAG,EAAV;AAAA,MACEiJ,MAAM,GAAGJ,KADX;AAAA,MAEE5I,GAFF;AAAA,MAGE0L,SAHF;AAAA,MAIEC,WAJF;AAAA,MAKEjB,KALF;;AAOA,MAAMkB,KAAK,4BAAG,4KAAH;AAAA;AAAA;AAAA,IAAX;;AAEA,SAAO5C,MAAP,EAAe;AACb,QAAI,CAAC0B,KAAK,GAAGkB,KAAK,CAAC9C,IAAN,CAAWE,MAAX,CAAT,MAAiC,IAArC,EACE,MAAM,+BAA+BA,MAArC;AAFW,yBAGM0B,KAAK,CAAC3B,MAHZ;AAGV/I,OAHU,kBAGVA,GAHU;AAGLgJ,UAHK,kBAGLA,MAHK;AAIbhJ,OAAG,GAAGA,GAAG,CAACmJ,IAAJ,EAAN;;AAJa,iBAKgB1L,KAAK,CAACuL,MAAD,EAAS,IAAT,EAAe,CAAf,EAAkB5F,2DAAlB,CALrB;;AAAA;;AAKZsI,aALY;AAKCC,eALD;AAMb3C,UAAM,GAAGA,MAAM,CAACrF,MAAP,CAAc+H,SAAd,CAAT;AAEA,QAAIlH,KAAK,GAAGmH,WAAZ;AACAjB,SAAK,GAAG;AAAA;AAAA,OAAiC5B,IAAjC,CAAsCtE,KAAtC,CAAR;AACA,QAAIkG,KAAK,KAAK,IAAd,EAAoB,4CAAqClG,KAArC;AACpBA,SAAK,GAAGkG,KAAK,CAAC3B,MAAN,CAAavE,KAArB;AACAzE,OAAG,CAACC,GAAD,CAAH,GAAWwE,KAAK,IAAI,GAAT,GAAe,EAAf,GAAoBA,KAA/B;AACD;;AAED,SAAOzE,GAAP;AACD,CA1BD;;AA4BA,IAAM8L,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAjD,KAAK,EAAI;AACnC,MAAMkD,iBAAiB,4BAAG,gHAAH;AAAA;AAAA,IAAvB;;AAEA,MAAIpB,KAAK,GAAGoB,iBAAiB,CAAChD,IAAlB,CAAuBF,KAAvB,CAAZ;AAAA,MACE0C,UAAU,GAAG,EADf;AAAA,MAEE7L,MAAM,GAAG,EAFX;AAIA,MAAIiL,KAAK,KAAK,IAAd,EAAoB,MAAM,+BAA+B9B,KAArC;AAPe,MAS7BI,MAT6B,GASlB0B,KAAK,CAAC3B,MATY,CAS7BC,MAT6B;;AAWnC,MAAI+C,WAAW,4BAAG,gKAAH;AAAA;AAAA;AAAA,IAAf;;AAEA,MAAIC,KAAK,GAAGP,aAAa,CAACzC,MAAD,CAAzB,CAbmC,CAcnC;;AACA,kCAAkBrE,MAAM,CAACC,IAAP,CAAYoH,KAAZ,CAAlB,kCAAsC;AAAjC,QAAMhM,GAAG,mBAAT;AACH,QAAMwE,KAAK,GAAGwH,KAAK,CAAChM,GAAD,CAAnB;;AACA,QAAI,CAAC0K,KAAK,GAAGqB,WAAW,CAACjD,IAAZ,CAAiB9I,GAAjB,CAAT,MAAoC,IAAxC,EAA8C;AAC5CsL,gBAAU,CAACtL,GAAD,CAAV,GAAkBwE,KAAlB;AACA;AACD;;AALmC,yBAORkG,KAAK,CAAC3B,MAPE;AAAA,QAO9BkD,QAP8B,kBAO9BA,QAP8B;AAAA,QAOpBC,OAPoB,kBAOpBA,OAPoB;AAQpCA,WAAO,GAAG,CAACA,OAAD,GAAW,CAArB;AACA,QAAIzM,MAAM,CAACyM,OAAD,CAAN,KAAoBC,SAAxB,EAAmC1M,MAAM,CAAC6D,IAAP,CAAY,EAAZ;;AACnC,QAAI,WAAW2I,QAAf,EAAyB;AACvBxM,YAAM,CAACyM,OAAD,CAAN,CAAgBhM,GAAhB,GAAsB,UAAUsE,KAAK,CAAC2E,IAAN,EAAhC;AACD,KAFD,MAEO,IAAI,aAAa8C,QAAjB,EAA2B;AAChCxM,YAAM,CAACyM,OAAD,CAAN,CAAgBnF,OAAhB,GAA0BvJ,IAAI,CAACgH,KAAD,CAAJ,CAAY5C,QAAtC;AACD,KAFM,MAEAnC,MAAM,CAACyM,OAAD,CAAN,CAAgBD,QAAhB,IAA4BzH,KAA5B;AACR;;AAED/E,QAAM,GAAGA,MAAM,CAACuF,GAAP,CAAW,UAAAwG,KAAK;AAAA,WAAK;AAC5BzJ,iBAAW,EAAE,MADe;AAE5BkE,UAAI,EAAE,OAFsB;AAG5BmG,aAAO,EAAE,MAHmB;AAI5BlM,SAAG,EAAEsL,KAAK,CAACtL,GAJiB;AAK5B2G,mBAAa,EAAE,IALa;AAM5BxG,aAAO,EAAEiE,6DAAK,mBAAMkH,KAAN;AAAaA,aAAK,EAAE,IAApB;AAA0BzE,eAAO,EAAE,IAAnC;AAAyC7G,WAAG,EAAE;AAA9C,SANc;AAO5B6G,aAAO,EAAEyE,KAAK,CAACzE,OAAN,IAAiB,CAAC;AAAEhF,mBAAW,EAAE,MAAf;AAAuBqD,YAAI,EAAE;AAA7B,OAAD;AAPE,KAAL;AAAA,GAAhB,CAAT;AAUA,SAAO;AAAEa,QAAI,EAAE,gBAAR;AAA0BxG,UAAM,EAANA,MAA1B;AAAkC6L,cAAU,EAAVA;AAAlC,GAAP;AACD,CA3CD;;AA6CA,IAAMe,aAAa,GAAG,SAAhBA,aAAgB,CAAAzD,KAAK,EAAI;AAC7B,MAAM0D,MAAM,4BAAG,6HAAH;AAAA;AAAA;AAAA,IAAZ;;AACA,MAAI5B,KAAK,GAAG4B,MAAM,CAACxD,IAAP,CAAYF,KAAZ,CAAZ;AAAA,MACE2D,OADF;AAAA,MAEEvD,MAFF;AAAA,MAGEwD,QAAQ,GAAG,EAHb;AAIA,MAAI9B,KAAK,KAAK,IAAd,EAAoB,MAAM,yBAAyB9B,KAA/B;AANS,wBAQN8B,KAAK,CAAC3B,MARA;AAQ1BwD,SAR0B,mBAQ1BA,OAR0B;AAQjBvD,QARiB,mBAQjBA,MARiB;AAS7BuD,SAAO,GAAGA,OAAO,CAACpD,IAAR,EAAV;;AAT6B,8CAWPH,MAAM,CAACxD,KAXA;AAAA;;AAAA;AAW7B;AAAA,UAAWiH,OAAX;AACED,cAAQ,CAAClJ,IAAT,CAAcmI,aAAa,CAACgB,OAAD,CAA3B;AADF;AAX6B;AAAA;AAAA;AAAA;AAAA;;AAc7B,SAAO;AAAExG,QAAI,EAAE,SAAR;AAAmBsG,WAAO,EAAPA,OAAnB;AAA4BC,YAAQ,EAARA;AAA5B,GAAP;AACD,CAfD;;AAiBA,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC9D,KAAD,EAAQ7D,OAAR,EAAoB;AAC7C,MAAI2F,KAAJ;AAEA,MAAIiC,SAAS,GAAG,sCAAhB;;AACA,MAAKjC,KAAK,GAAGiC,SAAS,CAAC7D,IAAV,CAAeF,KAAf,CAAb,EAAqC;AACnC,QAAIgE,OAAO,GAAGlC,KAAK,CAAC,CAAD,CAAnB;AAAA,QACEmC,QAAQ,GAAG,CAACnC,KAAK,CAAC,CAAD,CADnB;AAAA,QAEEoC,YAAY,GAAGpC,KAAK,CAAC,CAAD,CAAL,IAAY,CAACA,KAAK,CAAC,CAAD,CAFnC;AAAA,QAGE3E,WAAW,GAAG2E,KAAK,CAAC,CAAD,CAHrB;AAAA,QAIEqC,SAAS,GAAGrC,KAAK,CAAC,CAAD,CAAL,IAAY,EAJ1B,CADmC,CAOnC;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,QAAIsC,SAAJ,EAAeC,cAAf,EAA+BC,OAA/B,EAAwChN,GAAxC,CAhBmC,CAkBnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIiN,QAAQ,GAAG,2EAA2ErE,IAA3E,CACb8D,OADa,CAAf;;AAIA,QAAIO,QAAQ,KAAK,IAAjB,EAAuB;AACrB;AACA,aAAOpI,OAAP;AACD;;AACDiI,aAAS,GAAG9I,kEAAU,CAACiJ,QAAQ,CAAC,CAAD,CAAR,IAAe,EAAhB,CAAtB;AACAD,WAAO,GAAGC,QAAQ,CAAC,CAAD,CAAR,IAAeA,QAAQ,CAAC,CAAD,CAAvB,IAA8BA,QAAQ,CAAC,EAAD,CAAhD;AACAF,kBAAc,GAAGE,QAAQ,CAAC,CAAD,CAAR,IAAeA,QAAQ,CAAC,CAAD,CAAvB,IAA8B,EAA/C;;AAEA,QAAI,WAAWH,SAAf,EAA0B;AACxB9M,SAAG,GAAG8M,SAAS,GAAGnJ,uEAAe,CAACqJ,OAAD,CAA3B,GAAuCD,cAA7C;AACA/M,SAAG,GAAGA,GAAG,CAACyB,OAAJ,CAAY,IAAZ,EAAkB,GAAlB,CAAN,CAFwB,CAEM;;AAC9BoE,iBAAW,GAAG8G,QAAQ,GAAGD,OAAH,GAAaE,YAAY,GAAGI,OAAH,GAAanH,WAA5D;;AAEA,UAAIgH,SAAJ,EAAe;AACbhH,mBAAW,IAAIgH,SAAf;AACD;;AAEDhH,iBAAW,GAAG,CAAC;AAAEhE,mBAAW,EAAE,MAAf;AAAuBqD,YAAI,EAAEW;AAA7B,OAAD,CAAd;AACA,aAAO;AACLE,YAAI,EAAE,UADD;AAEL/F,WAAG,EAAHA,GAFK;AAGL6F,mBAAW,EAAXA;AAHK,OAAP;AAKD;AACF,GA3E4C,CA6E7C;AACA;AACA;;;AAEA,MAAIqH,MAAM,GAAGxE,KAAK,CAAC3E,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmBuB,KAAnB,CAAyB,GAAzB,CAAb;AACA,MAAI6H,KAAK,GAAGD,MAAM,CAAC,CAAD,CAAlB;AACA,MAAIE,OAAO,GAAG,4BAAd;;AACA,MAAK5C,KAAK,GAAG4C,OAAO,CAACxE,IAAR,CAAauE,KAAb,CAAb,EAAmC;AACjC,QAAIpH,IAAI,GAAG,OAAX;AAAA,QACEmG,OAAO,GAAGvI,uEAAe,CAAC6G,KAAK,CAAC,CAAD,CAAN,CAD3B;AAAA,QAEEwC,QAAO,GAAGrJ,uEAAe,CAAC6G,KAAK,CAAC,CAAD,CAAN,CAF3B;AAAA,QAGExK,IAAG,aAAMkM,OAAN,cAAiBc,QAAjB,CAHL;;AAIA,QAAIK,IAAI,GAAG;AAAEtH,UAAI,EAAJA,IAAF;AAAQmG,aAAO,EAAPA,OAAR;AAAiBlM,SAAG,EAAHA;AAAjB,KAAX;AAAA,QACEG,OAAO,GAAG,EADZ;AAAA,QAEE0G,OAAO,GAAG,EAFZ;AAGA,QAAIyG,QAAQ,GAAG,yMAAf;AAAA,QACEC,WAAW,GAAG,oCADhB;;AARiC,gDAWbL,MAAM,CAACnJ,KAAP,CAAa,CAAb,CAXa;AAAA;;AAAA;AAWjC,6DAAqC;AAAA,YAA1ByJ,KAA0B;;AACnC;AACA,YAAI,CAACF,QAAQ,CAAC1D,IAAT,CAAc4D,KAAd,CAAL,EAA2B;AACzB3G,iBAAO,CAACzD,IAAR,CAAaoK,KAAb;AACA;AACD;;AAED,YAAIhD,MAAK,SAAT;;AACA,YAAKA,MAAK,GAAG+C,WAAW,CAAC3E,IAAZ,CAAiB4E,KAAjB,CAAb,EAAuC;AACrCrN,iBAAO,CAACiD,IAAR,CAAa;AAAEtD,eAAG,EAAE0K,MAAK,CAAC,CAAD,CAAZ;AAAiBlG,iBAAK,EAAEkG,MAAK,CAAC,CAAD;AAA7B,WAAb;AACD,SAFD,MAEOrK,OAAO,CAACiD,IAAR,CAAaoK,KAAb;AACR;AAtBgC;AAAA;AAAA;AAAA;AAAA;;AAwBjC3G,WAAO,GAAGvJ,IAAI,CAACuJ,OAAO,CAAC4G,IAAR,CAAa,GAAb,CAAD,CAAJ,CAAwB/L,QAAlC;AACA,6BAAY2L,IAAZ;AAAkBlN,aAAO,EAAPA,OAAlB;AAA2B0G,aAAO,EAAPA;AAA3B;AACD,GA9G4C,CA+G7C;;;AACA,SAAO;AAAEnF,YAAQ,EAAEmD;AAAZ,GAAP;AACD,CAjHD;;AAmHA,IAAM6I,cAAc,GAAG,SAAjBA,cAAiB,CAAAhF,KAAK,EAAI;AAC9B,MAAI,cAAckB,IAAd,CAAmBlB,KAAnB,CAAJ,EAA+B,OAAOQ,aAAa,CAACR,KAAD,CAApB;AAE/B,MAAI,qBAAqBkB,IAArB,CAA0BlB,KAA1B,CAAJ,EAAsC,OAAOiD,mBAAmB,CAACjD,KAAD,CAA1B;AAEtC,MAAI,kBAAkBkB,IAAlB,CAAuBlB,KAAvB,CAAJ,EAAmC,OAAOyD,aAAa,CAACzD,KAAD,CAApB;AAEnC,MAAI,WAAWkB,IAAX,CAAgBlB,KAAhB,CAAJ,EAA4B,OAAOD,UAAU,CAACC,KAAD,CAAjB;AAE5B,MAAI,iCAAiCkB,IAAjC,CAAsClB,KAAtC,CAAJ,EACE,OAAOmC,cAAc,CAACnC,KAAD,CAArB;;AAEF,MAAI,iBAAiBkB,IAAjB,CAAsBlB,KAAtB,CAAJ,EAAkC;AAChC,QAAIxD,IAAI,GAAG,YAAY0D,IAAZ,CAAiBF,KAAjB,EAAwB,CAAxB,CAAX;AACA,WAAO;AACL7G,iBAAW,EAAE,QADR;AAELH,cAAQ,EAAE,CAAC8G,iBAAiB,CAACtD,IAAD,CAAlB;AAFL,KAAP;AAID;;AAED,MAAI,mBAAmB0E,IAAnB,CAAwBlB,KAAxB,CAAJ,EAAoC;AAClC,QAAIxD,KAAI,GAAG,YAAY0D,IAAZ,CAAiBF,KAAjB,EAAwB,CAAxB,CAAX;AACA,WAAOF,iBAAiB,CAAC,MAAMtD,KAAN,GAAa,GAAd,CAAxB;AACD;;AAED,SAAO;AACLa,QAAI,EAAE,KADD;AAELrE,YAAQ,EAAE,CAAC;AAAEG,iBAAW,EAAE,MAAf;AAAuBqD,UAAI,EAAE;AAA7B,KAAD;AAFL,GAAP;AAID,CA7BD;;AA+BA,IAAMyI,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAjF,KAAK,EAAI;AACjC,MAAMkF,UAAU,4BAAG,6JAAH;AAAA;AAAA;AAAA,IAAhB;;AACA,MAAI5N,GAAJ;AAAA,MACE6F,WADF;AAAA,MAEE2E,KAAK,GAAGoD,UAAU,CAAChF,IAAX,CAAgBF,KAAhB,CAFV;AAIA,MAAI8B,KAAK,KAAK,IAAd,EAAoB,MAAM,IAAIqD,KAAJ,CAAU,2BAAV,CAAN;AANa,wBAOTrD,KAAK,CAAC3B,MAPG;AAO9B7I,KAP8B,mBAO9BA,GAP8B;AAOzB6F,aAPyB,mBAOzBA,WAPyB;AAQjC,SAAO;AAAE7F,OAAG,EAAHA,GAAF;AAAO6F,eAAW,EAAXA;AAAP,GAAP;AACD,CATD;;AAWA,IAAMiI,aAAa,GAAG,SAAhBA,aAAgB,CAAC/I,OAAD,EAAUF,OAAV,EAAmB6D,KAAnB,EAA6B;AAAA,MAC3C7G,WAD2C,GAC3BkD,OAD2B,CAC3ClD,WAD2C;AAGjD,MAAIA,WAAW,IAAI,WAAnB,EAAgC,OAAOwI,eAAe,CAAC3B,KAAD,CAAtB;AAEhC,MAAI7G,WAAW,IAAI,SAAnB,EAA8B,OAAOoJ,aAAa,CAACvC,KAAD,CAApB;AAE9B,MAAI7G,WAAW,IAAI,MAAnB,EAA2B,OAAO2K,kBAAkB,CAAC9D,KAAD,EAAQ7D,OAAR,CAAzB;AAE3B,MAAIhD,WAAW,IAAI,UAAnB,EAA+B,OAAO6L,cAAc,CAAChF,KAAD,CAArB;AAE/B,MAAI7G,WAAW,IAAI,cAAnB,EAAmC,OAAO8L,iBAAiB,CAACjF,KAAD,CAAxB;AAEnC,SAAO;AAAEhH,YAAQ,EAAEmD;AAAZ,GAAP;AACD,CAdD;;AAgBA,IAAMtH,KAAK,GAAG,SAARA,KAAQ,CACZ4G,GADY,EAEZ4J,MAFY,EAGZ/I,KAHY,EAIZgJ,aAJY,EAMT;AAAA,MADHC,IACG,uEADI;AAAEtM,YAAQ,EAAE;AAAZ,GACJ;AACH,MAAIuM,MAAM,GAAG,EAAb;AAAA,MACEC,GADF;AAAA,MAEEzF,KAAK,GAAG,EAFV;AAAA,MAGE0F,WAHF;AAAA,MAIEvJ,OAAO,GAAG,EAJZ;AAAA,MAKE1E,OAAO,GAAG,EALZ;AAAA,MAME2G,cAAc,GAAG,CANnB;AAAA,MAOEvH,MAAM,GAAG,EAPX;AAAA,MAQEoC,QAAQ,GAAG,EARb;AAAA,MASE0M,SATF;AAAA,MAUEC,YAVF;AAYAP,QAAM,GAAGA,MAAM,KAAK,IAAX,GAAkB5J,GAAG,CAACT,MAAtB,GAA+BqK,MAAxC;AAbG,MAcGlM,WAdH,GAc0DmM,aAd1D,CAcGnM,WAdH;AAAA,MAcgBC,UAdhB,GAc0DkM,aAd1D,CAcgBlM,UAdhB;AAAA,MAc4BC,QAd5B,GAc0DiM,aAd1D,CAc4BjM,QAd5B;AAAA,MAcsCC,eAdtC,GAc0DgM,aAd1D,CAcsChM,eAdtC;AAeHgD,OAAK,IAAIlD,UAAU,KAAK,IAAf,GAAsB,CAAtB,GAA0BA,UAAU,CAAC4B,MAA9C;AACAgF,OAAK,IAAI5G,UAAU,KAAK,IAAf,GAAsB,EAAtB,GAA2BA,UAApC;;AAEA,SAAOkD,KAAK,GAAG+I,MAAf,EAAuB;AACrBO,gBAAY,GAAG,KAAf;AACAH,OAAG,GAAG,KAAN;;AAFqB,gDAGMnM,eAHN;AAAA;;AAAA;AAGrB,6DAA4C;AAAA,YAAjCuM,YAAiC;AAC1C,YAAI,CAAClL,gEAAQ,CAACc,GAAD,EAAMoK,YAAY,CAACzM,UAAnB,EAA+BkD,KAA/B,CAAb,EAAoD;AACpDmJ,WAAG,GAAG,IAAN;AACA,YAAID,MAAJ,EAAYrJ,OAAO,CAACzB,IAAR,CAAaoF,iBAAiB,CAAC0F,MAAD,CAA9B;AACZA,cAAM,GAAG,EAAT;;AAEA,YAAKI,YAAY,GAAGC,YAAY,CAACrM,SAAjC,EAA6C;AAC3C2C,iBAAO,CAACzB,IAAR,CAAa;AAAEvB,uBAAW,EAAE0M,YAAY,CAAC1M;AAA5B,WAAb;AACA6G,eAAK,IAAI6F,YAAY,CAACzM,UAAtB;AACAkD,eAAK,IAAIuJ,YAAY,CAACzM,UAAb,CAAwB4B,MAAjC;AACA;AACD;;AAXyC,sBAaRnG,KAAK,CAAC4G,GAAD,EAAM4J,MAAN,EAAc/I,KAAd,EAAqBuJ,YAArB,CAbG;;AAAA;;AAazCvJ,aAbyC;AAalCoJ,mBAbkC;AAarBC,iBAbqB;AAc1C3F,aAAK,IAAI2F,SAAT;AACAxJ,eAAO,CAACzB,IAAR,CAAagL,WAAb;AAEA,YAAIG,YAAY,CAAC1M,WAAb,IAA4B,WAAhC,EACEuM,WAAW,CAACtH,cAAZ,GAA6B,EAAEA,cAA/B;AAEF,YAAI,WAAW8B,IAAX,CAAgBwF,WAAW,CAACvM,WAA5B,MAA6C,IAAjD,EACEF,QAAQ,CAACyB,IAAT,CAAcgL,WAAd;AAEF,YACEA,WAAW,CAACvM,WAAZ,IAA2B,MAA3B,IACAuM,WAAW,CAACrI,IAAZ,IAAoB,OADpB,IAEAqI,WAAW,CAAClC,OAAZ,IAAuB,MAHzB,EAKE3M,MAAM,CAAC6D,IAAP,CAAYgL,WAAZ;AAEF,YAAIA,WAAW,CAACvM,WAAZ,IAA2B,SAA/B,EACEtC,MAAM,CAAC6D,IAAP,OAAA7D,MAAM,kFAAS6O,WAAW,CAAC7O,MAArB,EAAN;AAEF;AACD;AArCoB;AAAA;AAAA;AAAA;AAAA;;AAuCrB,QAAI+O,YAAJ,EAAkB;;AAElB,QAAI,CAACH,GAAL,EAAU;AACR,UAAIpM,QAAJ,EAAc;AACZ,YAAIyM,aAAa,GAAG,KAApB;;AADY,oDAESzM,QAFT;AAAA;;AAAA;AAEZ,iEAA+B;AAAA,gBAApB0M,MAAoB;;AAC7B,gBAAIpL,gEAAQ,CAACc,GAAD,EAAMsK,MAAN,EAAczJ,KAAd,CAAZ,EAAkC;AAChCwJ,2BAAa,GAAG,IAAhB;AACAxJ,mBAAK,IAAIyJ,MAAM,CAAC/K,MAAhB;AACAgF,mBAAK,IAAI+F,MAAT;;AAEA,kBAAIT,aAAa,CAACnM,WAAd,IAA6B,MAAjC,EAAyC;AACvC,uBAAOmD,KAAK,GAAG+I,MAAf,EAAuB;AACrB,sBAAIW,MAAM,GAAG,YAAb;;AACA,sBAAIrL,gEAAQ,CAACc,GAAD,EAAMuK,MAAN,EAAc1J,KAAd,CAAZ,EAAkC;AAChCA,yBAAK,IAAI0J,MAAM,CAAChL,MAAhB;AACA;AACD,mBAHD,MAGO,IAAI,KAAKkG,IAAL,CAAUzF,GAAG,CAACa,KAAD,CAAb,CAAJ,EAA2B;AAChC0D,yBAAK,IAAIvE,GAAG,CAACa,KAAK,EAAN,CAAZ;AACD,mBAFM,MAEA;AACR;AACF;AACF,aAjB4B,CAiB3B;;AACH,WApBW,CAoBV;;AApBU;AAAA;AAAA;AAAA;AAAA;;AAqBZ,YAAIwJ,aAAJ,EAAmB;AACpB,OAvBO,CAuBN;;;AAEF,UAAIxJ,KAAK,GAAG+I,MAAZ,EAAoB;AAClBrF,aAAK,IAAIvE,GAAG,CAACa,KAAD,CAAZ;AACAkJ,cAAM,IAAI/J,GAAG,CAACa,KAAK,EAAN,CAAb;AACD;AACF,KAtEoB,CAsEnB;;AACH;;AAED,MAAIkJ,MAAJ,EAAYrJ,OAAO,CAACzB,IAAR,CAAaoF,iBAAiB,CAAC0F,MAAD,CAA9B;AAEZ,MAAIrO,GAAG,GAAG,CACRmF,KADQ,EAERZ,6DAAK;AACHvC,eAAW,EAAXA,WADG;AAEHF,YAAQ,EAAEsM,IAAI,CAACtM,QAAL,GAAgBgN,0EAAe,CAAChN,QAAD,CAA/B,GAA4C,IAFnD;AAGHpC,UAAM,EAANA;AAHG,KAIAuO,aAAa,CAACE,aAAD,EAAgBnJ,OAAhB,EAAyB6D,KAAzB,EAAgCvI,OAAhC,CAJb,EAFG,EAQRuI,KARQ,CAAV;AAWA,SAAO7I,GAAP;AACD,CA/GD;;AAiHA,IAAMvC,IAAI,GAAG,SAAPA,IAAO,CAAC6G,GAAD,EAAM8J,IAAN;AAAA,SAAgB9J,GAAG,GAAG5G,KAAK,CAAC4G,GAAD,EAAM,IAAN,EAAY,CAAZ,EAAehB,yDAAf,EAAuB8K,IAAvB,CAAL,CAAkC,CAAlC,CAAH,GAA0C,EAA7D;AAAA,CAAb;;AAEA;;;;;;;;;;0BAjlBM/F,K;0BACAG,U;0BAIAG,iB;0BAEAC,U;0BAkBAS,a;0BAoFAmB,e;0BA8CAQ,c;0BAiCAI,a;0BA2BAM,a;0BA4BAI,mB;0BA6CAQ,a;0BAiBAK,kB;0BAmHAkB,c;0BA+BAC,iB;0BAWAG,a;0BAgBAvQ,K;0BAiHAD,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3lBN,IAAMqR,eAAe,GAAG,SAAlBA,eAAkB,CAAAhN,QAAQ,EAAI;AAClC,MAAI,CAACA,QAAQ,CAAC+B,MAAd,EAAsB,OAAO,IAAP;;AACtB,MAAIkL,QAAQ,GAAG,SAAXA,QAAW,CAAAlJ,OAAO;AAAA,WAAI,CAAC,gBAAgBkD,IAAhB,CAAqBlD,OAAO,CAAC7D,WAA7B,EAA0C,CAA1C,CAAL;AAAA,GAAtB;;AACA,MAAIgN,YAAY,GAAG,CAAnB;AAAA,MACEhP,GAAG,GAAG,EADR;AAAA,MAEEiP,cAAc,GAAGjP,GAFnB;AAIAA,KAAG,CAACkP,OAAJ,GAAc,EAAd;;AAPkC,6CASZpN,QATY;AAAA;;AAAA;AASlC,wDAAgC;AAAA,UAArB+D,OAAqB;AAC9B,UAAIsJ,KAAK,GAAGJ,QAAQ,CAAClJ,OAAD,CAApB;AAAA,UACEuJ,WAAW,GAAGvJ,OAAO,CAAChE,QAAR,CAAiB,CAAjB,EAAoBwD,IAApB,CAAyB+D,IAAzB,EADhB;AAAA,UAEEiG,SAAS,GAAGD,WAAW,CAACxN,OAAZ,CAAoB,IAApB,EAA0B,EAA1B,IAAgC,GAAhC,GAAsCuN,KAFpD,CAD8B,CAK9B;;AACAtJ,aAAO,CAACsJ,KAAR,GAAgBA,KAAhB;AACAtJ,aAAO,CAACR,IAAR,GAAe+J,WAAf;AACAvJ,aAAO,CAACD,EAAR,GAAayJ,SAAb;AACAxJ,aAAO,CAACF,SAAR,GAAoB,kBAAkBwJ,KAAtC;AACAtJ,aAAO,CAACqJ,OAAR,GAAkBD,cAAc,CAACC,OAAf,CAAuBhL,KAAvB,EAAlB,CAV8B,CAY9B;;AACA,UAAIiL,KAAK,GAAGH,YAAZ,EAA0B;AACxBnJ,eAAO,CAACqJ,OAAR,CAAgB3L,IAAhB,CAAqB,CAArB;AAEA,YAAI,CAAC0L,cAAc,CAACK,gBAApB,EACEL,cAAc,CAACK,gBAAf,GAAkC,EAAlC;AACFzJ,eAAO,CAAC0J,aAAR,GAAwBN,cAAxB;AACAA,sBAAc,CAACK,gBAAf,CAAgC/L,IAAhC,CAAqCsC,OAArC;AACD,OAPD,MAOO,IAAIsJ,KAAK,IAAIH,YAAb,EAA2B;AAChCnJ,eAAO,CAACqJ,OAAR,CAAgBrJ,OAAO,CAACqJ,OAAR,CAAgBrL,MAAhB,GAAyB,CAAzC;AAEA,YAAI2L,MAAM,GAAGP,cAAc,CAACM,aAA5B;AACAC,cAAM,CAACF,gBAAP,CAAwB/L,IAAxB,CAA6BsC,OAA7B;AACAA,eAAO,CAAC0J,aAAR,GAAwBC,MAAxB;AACD,OANM,MAMA;AACL3J,eAAO,CAACqJ,OAAR,GAAkBrJ,OAAO,CAACqJ,OAAR,CAAgBhL,KAAhB,CAAsB,CAAtB,EAAyBiL,KAAzB,CAAlB;AACAtJ,eAAO,CAACqJ,OAAR,CAAgBrJ,OAAO,CAACqJ,OAAR,CAAgBrL,MAAhB,GAAyB,CAAzC;AAEA,YAAI4L,WAAW,GAAGR,cAAc,CAACM,aAAf,CAA6BA,aAA/C;AACAE,mBAAW,CAACH,gBAAZ,CAA6B/L,IAA7B,CAAkCsC,OAAlC;AACAA,eAAO,CAAC0J,aAAR,GAAwBE,WAAxB;AACD;;AACDR,oBAAc,GAAGpJ,OAAjB;AACAmJ,kBAAY,GAAGG,KAAf;AACD;AA7CiC;AAAA;AAAA;AAAA;AAAA;;AA8ClC,SAAOnP,GAAP;AACD,CA/CD;;AAiDA;;;;;;;;;;0BAjDM8O,e;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAN;AACA;AACA;AACA;;AAEA,IAAMY,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjB,SACE;AAAK,aAAS,EAAC;AAAf,KACE;AAAK,aAAS,EAAC;AAAf,KACE;AAAM,aAAS,EAAC;AAAhB,YADF,EAEE;AAAM,aAAS,EAAC;AAAhB,aAFF,CADF,EAKE;AAAK,aAAS,EAAC;AAAf,KACE;AAAQ,aAAS,EAAC;AAAlB,eADF,EAEE;AAAQ,aAAS,EAAC;AAAlB,YAFF,EAGE;AAAQ,aAAS,EAAC;AAAlB,YAHF,EAIE;AAAQ,aAAS,EAAC;AAAlB,mBAJF,EAKE;AAAQ,aAAS,EAAC,cAAlB;AAAiC,MAAE,EAAC;AAApC,oBALF,CALF,EAcE;AAAK,aAAS,EAAC;AAAf,KACE,2DAAC,wEAAD,OADF,CAdF,EAiBE;AAAK,aAAS,EAAC;AAAf,KACE;AACE,QAAI,EAAC,MADP;AAEE,eAAW,EAAC,kBAFd;AAGE,aAAS,EAAC;AAHZ,IADF,EAME;AAAK,aAAS,EAAC;AAAf,KACE,2DAAC,yEAAD,OADF,CANF,CAjBF,CADF;AA8BD,CA/BD;;eAiCeA,I;AAAA;;;;;;;;;;0BAjCTA,I;;;;;;;;;;;;;;;;;;ACLN;AAAA;AAAA,qBAAqB,gDAAgD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,wCAAwC;;AAE5R;;AAE/B,wBAAwB,mDAAmB;AAC3C;AACA,CAAC;;AAED;AACA,sBAAsB,mDAAmB;AACzC;AACA,GAAG;AACH;;AAEe,kEAAS,E;;;;;;;;ACdxB;AAAA;AAAA,qBAAqB,gDAAgD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,wCAAwC;;AAE5R;;AAE/B,wBAAwB,mDAAmB;AAC3C;AACA;AACA,CAAC;;AAED;AACA,sBAAsB,mDAAmB;AACzC;AACA,GAAG;AACH;;AAEe,mEAAU,E;;;;;;;;;;;;;;;;;;;;;;;ACfzB;AACA;AACA;AACA;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,OAAkB;AAAA,MAAf7N,QAAe,QAAfA,QAAe;AACnC,MAAM8N,WAAW,GAAG9J,oDAAM,CAAC,IAAD,CAA1B;;AAEA,MAAM+J,MAAM,GAAG,SAATA,MAAS,CAAAC,SAAS,EAAI;AAC1B,QAAI1P,KAAK,GAAGwP,WAAW,CAACG,OAAZ,CAAoBC,WAAhC;AACA,QAAIC,GAAG,GAAGL,WAAW,CAACG,OAAZ,CAAoBG,UAA9B;AACA,QAAIC,YAAY,GAAGP,WAAW,CAACG,OAAZ,CAAoBK,WAAvC;AACA,QAAIC,MAAM,GAAGjQ,KAAK,GAAG+P,YAArB;AACA,QAAIG,UAAU,GAAGD,MAAM,GAAG,IAA1B,CAL0B,CAO1B;;AACArI,WAAO,CAACuI,GAAR,CAAYlT,QAAQ,CAACmT,aAAT,CAAuB,oCAAvB,CAAZ;AACAZ,eAAW,CAACG,OAAZ,CAAoBG,UAApB,GACEJ,SAAS,IAAI,OAAb,GACIW,IAAI,CAACC,GAAL,CAASL,MAAT,EAAiBJ,GAAG,GAAGK,UAAvB,CADJ,GAEIG,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYV,GAAG,GAAGK,UAAlB,CAHN;AAID,GAbD;;AAeA,MAAMM,OAAO,GAAG,SAAVA,OAAU,CAAAhL,EAAE,EAAI;AACpB,QAAIC,OAAO,GAAGxI,QAAQ,CAACC,cAAT,CAAwBsI,EAAxB,CAAd;AACA,QAAIiL,MAAM,GAAGxT,QAAQ,CAACC,cAAT,CAAwBsI,EAAE,GAAG,OAA7B,CAAb;AACA,QAAIkL,UAAU,GAAGzT,QAAQ,CAAC0T,sBAAT,CAAgC,sBAAhC,EAAwD,CAAxD,CAAjB;AAHoB,gBAIgB,CAACF,MAAM,CAACG,WAAR,EAAqBH,MAAM,CAACI,UAA5B,CAJhB;AAAA,QAIfC,WAJe;AAAA,QAIFC,cAJE;AAAA,gBAMgC,CAClDL,UAAU,CAACV,WADuC,EAElDU,UAAU,CAACZ,UAFuC,CANhC;AAAA,QAMfkB,qBANe;AAAA,QAMQC,oBANR;AAWpB,QAAIC,SAAS,GAAGH,cAAhB;AAAA,QACEI,SAAS,GAAGJ,cAAc,GAAGD,WAD/B;AAEA,QAAIM,SAAS,GAAGH,oBAAhB;AAAA,QACEI,SAAS,GAAGJ,oBAAoB,GAAGD,qBADrC;;AAGA,QAAIE,SAAS,GAAGG,SAAZ,IAAyBF,SAAS,GAAGC,SAAzC,EAAoD;AAClDxJ,aAAO,CAACuI,GAAR,CAAY,cAAZ;AACD,KAFD,MAEO,IAAIe,SAAS,IAAIE,SAAb,IAA0BD,SAAS,IAAIE,SAA3C,EAAsD;AAC3DzJ,aAAO,CAACuI,GAAR,CAAY,QAAZ;AACD,KAFM,MAEA;AACL,UAAImB,KAAK,GAAGR,WAAW,GAAG,GAA1B;;AACA,UAAII,SAAS,GAAGE,SAAhB,EAA2B;AACzBE,aAAK,IAAIF,SAAS,GAAGF,SAArB;AACAR,kBAAU,CAACZ,UAAX,IAAyBwB,KAAzB;AACD,OAHD,MAGO;AACLA,aAAK,IAAIH,SAAS,GAAGE,SAArB;AACAX,kBAAU,CAACZ,UAAX,IAAyBwB,KAAzB;AACD;AACF;;AAED,QAAInQ,IAAI,GAAGlE,QAAQ,CAACkE,IAApB;AACAA,QAAI,CAACoQ,SAAL,GACE9L,OAAO,CAAC+L,SAAR,GACAvU,QAAQ,CAAC0T,sBAAT,CAAgC,MAAhC,EAAwC,CAAxC,EAA2Cc,YAF7C;AAGD,GAnCD;;AAoCA,SACE;AAAK,aAAS,EAAC;AAAf,KACE;AAAK,aAAS,EAAC;AAAf,KACE;AACE,WAAO,EAAE;AAAA,aAAMhC,MAAM,CAAC,MAAD,CAAZ;AAAA,KADX;AAEE,aAAS,EAAC;AAFZ,KAIE,2DAAC,sEAAD,OAJF,CADF,EAOE;AAAK,OAAG,EAAED,WAAV;AAAuB,aAAS,EAAC;AAAjC,KACG9N,QADH,aACGA,QADH,uBACGA,QAAQ,CAAEwN,gBAAV,CAA2BrK,GAA3B,CAA+B,UAACY,OAAD,EAAUV,KAAV,EAAoB;AAClD,WACE;AACE,SAAG,EAAEA,KADP;AAEE,aAAO,EAAE;AAAA,eAAMyL,OAAO,CAAC/K,OAAO,CAACD,EAAT,CAAb;AAAA,OAFX;AAGE,QAAE,EAAEC,OAAO,CAACD,EAAR,GAAa;AAHnB,OAKGC,OAAO,CAACR,IALX,CADF;AASD,GAVA,CADH,CAPF,EAoBE;AACE,WAAO,EAAE;AAAA,aAAMwK,MAAM,CAAC,OAAD,CAAZ;AAAA,KADX;AAEE,aAAS,EAAC;AAFZ,KAIE,2DAAC,uEAAD,OAJF,CApBF,CADF,CADF;AA+BD,CArFD;;cAAMF,U;;eAuFSA,U;AAAA;;;;;;;;;;0BAvFTA,U;;;;;;;;;;;;;;;;;;ACLN;AAAA;AAAA,qBAAqB,gDAAgD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,wCAAwC;;AAE5R;;AAE/B,wBAAwB,mDAAmB;AAC3C;AACA,CAAC;;AAED,yBAAyB,mDAAmB;AAC5C;AACA,CAAC;;AAED;AACA,sBAAsB,mDAAmB;AACzC;AACA;AACA,GAAG;AACH;;AAEe,gEAAO,E;;;;;;;;ACnBtB;AAAA;AAAA,qBAAqB,gDAAgD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,wCAAwC;;AAE5R;;AAE/B,wBAAwB,mDAAmB;AAC3C;AACA,CAAC;;AAED,yBAAyB,mDAAmB;AAC5C;AACA,CAAC;;AAED;AACA,sBAAsB,mDAAmB;AACzC;AACA;AACA,GAAG;AACH;;AAEe,iEAAQ,E","file":"wiki.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t4: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([123,0,3]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import \"./../../components/WikiApp/normalize.css\";\nimport \"./../../components/WikiApp/style3.scss\";\nimport \"./../../components/WikiApp/style.sass\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport App from \"./../../components/WikiApp\";\n\nReactDOM.render(<App />, document.getElementById(\"wikiapp\"));\n","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588565441439\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588565441437\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588565444216\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588565448353\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588565446354\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588565446328\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import { main } from \"./../wiki_parser\";\n\nconst parseWikiText = response => main(response?.parse?.wikitext?.[\"*\"]);\n\nconst buildURL = params =>\n  \"https://en.wikipedia.org/w/api.php?\" +\n  new URLSearchParams({ ...params, format: \"json\", origin: \"*\" });\n\nconst pageContentParams = title => ({\n  action: \"parse\",\n  prop: \"wikitext\",\n  page: title\n});\n\nconst imageParams = (title, limit = 500) => ({\n  action: \"query\",\n  prop: \"imageinfo\",\n  titles: title,\n  generator: \"images\",\n  gimlimit: limit,\n  iiprop: \"url|dimensions\"\n});\n\nconst summaryParams = title => ({\n  action: \"query\",\n  prop: \"extracts\",\n  exsentences: 2,\n  exintro: true,\n  explaintext: true,\n  exsectionformat: \"plain\",\n  redirects: 1,\n  titles: title\n});\n\nexport {\n  parseWikiText,\n  buildURL,\n  pageContentParams,\n  imageParams,\n  summaryParams\n};\n","import { useEffect, useState } from \"react\";\nimport {\n  parseWikiText,\n  buildURL,\n  pageContentParams,\n  imageParams\n} from \"./../WikiWrapper\";\nimport useFetch from \"./useFetch.js\";\n\nconst usePageContent = title => {\n  const [pageContent, setPageContent] = useState(null);\n  const pageContentFetcher = useFetch(buildURL(pageContentParams(title)));\n  useEffect(() => {\n    setPageContent(parseWikiText(pageContentFetcher.response));\n  }, [pageContentFetcher.response]);\n  return pageContent;\n};\n\nconst useImages = title => {\n  const [images, setImages] = useState(null);\n  const imageFetch = useFetch(buildURL(imageParams(title)));\n  useEffect(() => {\n    let imgs = imageFetch.response?.query?.pages,\n      res = {};\n    // return object {filename: {url, width, height}}\n    for (const key in imgs) {\n      let { url, width, height } = imgs[key]?.imageinfo?.[0];\n      res[imgs[key].title] = { url, width, height };\n    }\n    setImages(res);\n  }, [imageFetch.response]);\n  return images;\n};\n\nexport { usePageContent, useImages };\n","import { useState, useEffect } from \"react\";\n\nconst useFetch = (url, options = {}) => {\n  const [response, setResponse] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      try {\n        const res = await fetch(url, options);\n        const json = await res.json();\n        setResponse(json);\n        setIsLoading(false);\n      } catch (error) {\n        setError(error);\n      }\n    };\n    fetchData();\n  }, []);\n\n  return { response, error, isLoading };\n};\n\nexport default useFetch;\n","import React, { Fragment } from \"react\";\nimport Content from \"./../Content\";\nimport Menu from \"./../Menu\";\nimport Navigation from \"./../Navigation\";\nimport { usePageContent, useImages } from \"./../../../hooks/useWiki.js\";\nimport \"lazysizes\";\nimport { SkeletonTheme } from \"react-loading-skeleton\";\n\n// import Sidebar from \"./../SideBar\";\n// import Reference from \"./../Reference\";\n\nexport const ImagesContext = React.createContext(null);\n\n// const titles = [\n//   // \"Pet_door\"\n//   \"New_York_City\",\n//   \"The_Last_Supper_(Leonardo)\",\n//   \"Leonardo_da_Vinci\",\n//   \"Mona_Lisa\",\n//   \"Renaissance\"\n// ];\n\nconst Article = ({ title }) => {\n  title = title || \"New_York_City\";\n  const pageContent = usePageContent(title);\n  const images = useImages(title);\n\n  React.useEffect(() => {\n    let toggle = document.getElementById(\"theme-switch\");\n\n    toggle?.addEventListener(\"click\", function(e) {\n      e.preventDefault();\n      if (document.body.classList.contains(\"funky\")) {\n        document.body.classList.remove(\"funky\");\n      } else {\n        document.body.classList.add(\"funky\");\n      }\n    });\n  }, []);\n\n  return (\n    <ImagesContext.Provider value={{ images }}>\n      <Fragment>\n        <Menu />\n        <SkeletonTheme color=\"transparent\">\n          <div className=\"article\">\n            <div className=\"hero\">\n              <div className=\"hero__title\">{title.replace(/_/g, \" \")}</div>\n              <div className=\"hero__credit\">\n                From Wikipedia, the free encyclopedia\n              </div>\n              <Content content={pageContent?.children} />\n              {/*<Reference {...{ references }} />*/}\n            </div>\n          </div>\n        </SkeletonTheme>\n        <Navigation headings={pageContent?.headings} />\n      </Fragment>\n    </ImagesContext.Provider>\n  );\n};\n\nexport default Article;\n\n// get references\n// useEffect(() => {\n//   if (parsed.children) {\n//     let res = [];\n//     for (const element of parsed.children) {\n//       if (element.elementName == \"Reference\") {\n//         res.push(element);\n//       }\n//     }\n//     setReferences(res);\n//   }\n// }, [parsed]);\n","const Comment = {\n    elementName: \"Comment\",\n    startToken: \"<!--\",\n    endToken: [\"-->\"],\n    allowedChildren: []\n  },\n  Break = {\n    elementName: \"Break\",\n    startToken: \"<br />\",\n    endToken: [],\n    allowedChildren: [],\n    selfClose: true\n  },\n  BoldItalic = {\n    elementName: \"BoldItalic\",\n    startToken: \"'''''\",\n    endToken: [\"'''''\"],\n    allowedChildren: []\n  },\n  Bold = {\n    elementName: \"Bold\",\n    startToken: \"'''\",\n    endToken: [\"'''\"],\n    allowedChildren: []\n  },\n  Italic = {\n    elementName: \"Italic\",\n    startToken: \"''\",\n    endToken: [\"''\"],\n    allowedChildren: []\n  },\n  Gallery = {\n    elementName: \"Gallery\",\n    startToken: \"<gallery\",\n    endToken: [\"</gallery>\"],\n    allowedChildren: []\n  },\n  Link = {\n    elementName: \"Link\",\n    startToken: \"[[\",\n    endToken: [\"]]\"],\n    allowedChildren: [Bold, Italic]\n  },\n  ExternalLink = {\n    elementName: \"ExternalLink\",\n    startToken: \"[\",\n    endToken: [\"]\"],\n    allowedChildren: []\n  },\n  Heading1 = {\n    elementName: \"Heading1\",\n    startToken: \"==\",\n    endToken: [\"==\"],\n    allowedChildren: []\n  },\n  Heading2 = {\n    elementName: \"Heading2\",\n    startToken: \"===\",\n    endToken: [\"===\"],\n    allowedChildren: []\n  },\n  Heading3 = {\n    elementName: \"Heading3\",\n    startToken: \"====\",\n    endToken: [\"====\"],\n    allowedChildren: []\n  },\n  Heading4 = {\n    elementName: \"Heading4\",\n    startToken: \"=====\",\n    endToken: [\"=====\"],\n    allowedChildren: []\n  },\n  Heading5 = {\n    elementName: \"Heading5\",\n    startToken: \"======\",\n    endToken: [\"======\"],\n    allowedChildren: []\n  },\n  Heading6 = {\n    elementName: \"Heading6\",\n    startToken: \"=======\",\n    endToken: [\"=======\"],\n    allowedChildren: []\n  },\n  Reference = {\n    elementName: \"Reference\",\n    startToken: \"<ref\",\n    endToken: [\"</ref>\", \"/>\"],\n    allowedChildren: []\n  },\n  Template = {\n    elementName: \"Template\",\n    startToken: \"{{\",\n    endToken: [\"}}\"],\n    allowedChildren: []\n  },\n  BlockQuote = {\n    elementName: \"Block Quote\",\n    startToken: \"<blockquote>\",\n    endToken: [\"</blockquote>\"],\n    allowedChildren: [Italic, Bold, BoldItalic]\n  },\n  PairPipe = {\n    elementName: \"PairPipe\",\n    startToken: null,\n    endToken: [\"|\"],\n    allowedChildren: []\n  },\n  Global = {\n    elementName: \"Global\",\n    startToken: null,\n    endToken: null,\n    allowedChildren: [\n      Comment,\n      Gallery,\n      Break,\n      BoldItalic,\n      Bold,\n      Italic,\n      Link,\n      ExternalLink,\n      Heading6,\n      Heading5,\n      Heading4,\n      Heading3,\n      Heading2,\n      Heading1,\n      Reference,\n      BlockQuote,\n      Template\n    ]\n  };\n\nLink.allowedChildren.push(Link);\nItalic.allowedChildren.push(Link);\nReference.allowedChildren.push(Break, Template);\nTemplate.allowedChildren.push(Template, Reference, Link);\nPairPipe.allowedChildren = Global.allowedChildren;\n\nexport { Global, PairPipe };\n","const tasteStr = (s, t, i) => s[i] == t[0] && s.substr(i, t.length) == t;\n\nconst capitalizeFirst = string =>\n  string.charAt(0).toUpperCase() + string.slice(1);\n\nconst capitalize = string =>\n  string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n\nconst trimQuote = str =>\n  str && '\"' == str[0] && '\"' == str[str.length - 1]\n    ? str.slice(1, str.length - 1)\n    : str;\n\nconst clean = obj => {\n  let res = {};\n  for (const key in obj) {\n    let value = obj[key];\n    if (\n      !value ||\n      (Array.isArray(value) && !value.length) ||\n      !Object.keys(value).length\n    )\n      continue;\n    res[key] = value;\n  }\n  return res;\n};\n\nexport { tasteStr, capitalizeFirst, capitalize, trimQuote, clean };\n","import React from \"react\";\nimport Article from \"./Article\";\nconst App = () => {\n  return <Article />;\n};\n\nexport default App;\n","import React from \"react\";\nimport { Element } from \"./../Elements\";\n\nconst Content = ({ content }) => {\n  return (\n    <div className=\"wiki-content\">\n      {content\n        ? content.map((element, index) => (\n            <Element key={index} props={element} />\n          ))\n        : \"Loading...\"}\n    </div>\n  );\n};\n\nexport default Content;\n","import React, { Fragment, useState, useEffect } from \"react\";\nimport { ImagesContext } from \"./../Article\";\nimport Tooltip from \"./../Tooltip\";\n\nexport const Text = ({ text }) => {\n  let [splitText, setSplitText] = useState(\"\");\n  useEffect(() => {\n    let paragraphs = text.split(\"\\n\\n\"),\n      res = [];\n    for (let i = 0; i < paragraphs.length; i++) {\n      res.push(<span key={-i - 1}>{paragraphs[i]}</span>);\n      if (i < paragraphs.length - 1) {\n        res.push(<br key={i} />);\n      }\n    }\n    setSplitText(res);\n  }, []);\n  return <Fragment>{splitText}</Fragment>;\n};\n\nconst Heading = ({ className, id, text }) => {\n  const heading = React.useRef();\n\n  // const isElementInViewport = () => {\n  //   // console.log(\"text\");\n  //   let el = heading.current;\n  //   // Special bonus for those using jQuery\n\n  //   var rect = el.getBoundingClientRect();\n\n  //   let res =\n  //     rect.top >= 0 &&\n  //     rect.left >= 0 &&\n  //     rect.bottom <=\n  //       (window.innerHeight || document.documentElement.clientHeight) &&\n  //     rect.right <= (window.innerWidth || document.documentElement.clientWidth);\n  //   // if (res) {\n  //   //   console.log(text);\n  //   // }\n  // };\n\n  // useEffect(() => {\n  //   window.addEventListener(\"scroll\", isElementInViewport);\n  //   return () => window.removeEventListener(\"scroll\", isElementInViewport);\n  // }, []);\n\n  return (\n    <div ref={heading} className={className} id={id}>\n      {text}\n    </div>\n  );\n};\n\nconst WikiLink = ({ url, displayText }) => {\n  return (\n    <Tooltip url={url}>\n      <a href={\"https://en.wikipedia.org/wiki/\" + url}>\n        {displayText.map((e, i) => {\n          return <Element key={i} props={e} />;\n        })}\n      </a>\n    </Tooltip>\n  );\n};\n\nexport const Template = ({ props }) => {\n  if (props.type == \"N/A\" || props.type == \"Infobox\") return \"\";\n\n  let { attribute } = props;\n  if (props.type == \"multipleImages\") {\n    return (\n      <div className=\"wiki-gallery\">\n        {props.images &&\n          props.images.map((e, i) => {\n            return <Element key={i} props={e} />;\n          })}\n      </div>\n    );\n  }\n  if (props.type == \"cite\")\n    return (\n      <Fragment>\n        <a className=\"wiki-cite\" href={attribute.url}>\n          {`\"${attribute.title}\"`}\n        </a>\n        {\". \"}\n        {props.subType == \"web\" && attribute.publisher && (\n          <span>{`${attribute.publisher}. `}</span>\n        )}\n        {props.subType == \"web\" && attribute.accessdate && (\n          <span>{`Retrieved ${attribute.accessdate}. `}</span>\n        )}\n      </Fragment>\n    );\n\n  if (props.type == \"footnote\") {\n    return (\n      <sup className=\"wiki-footnote\">\n        {props.children.map((e, i) => (\n          <Element key={i} props={e} />\n        ))}\n      </sup>\n    );\n  }\n\n  return \"<--N/A\" + JSON.stringify(props) + \"-->\";\n};\n\nexport const Element = ({ props }) => {\n  let { elementName, children } = props;\n\n  if (elementName == \"Comment\") return \"\";\n\n  if (elementName == \"ExternalLink\") {\n    return (\n      <a href={\"https://en.wikipedia.org/wiki/\" + props.url}>\n        {props.displayText}\n      </a>\n    );\n  }\n\n  if (elementName == \"Break\") {\n    return <br />;\n  }\n\n  if (elementName == \"Text\") {\n    return <Text text={props.text} />;\n  }\n\n  if (elementName == \"Template\") {\n    return <Template {...{ props }} />;\n  }\n\n  let renderChildren;\n  if (Array.isArray(children)) {\n    renderChildren = children.map((e, i) => <Element key={i} props={e} />);\n  }\n\n  if (elementName == \"Bold\") {\n    return <span className=\"wiki-bold\">{renderChildren}</span>;\n  }\n\n  if (elementName == \"Italic\") {\n    return <span className=\"wiki-italic\">{renderChildren}</span>;\n  }\n\n  if (elementName == \"BoldItalic\") {\n    return <span className=\"wiki-italic wiki-bold\">{renderChildren}</span>;\n  }\n\n  if (elementName == \"Block Quote\") {\n    return <blockquote>{renderChildren}</blockquote>;\n  }\n\n  if (elementName.slice(0, -1) == \"Heading\") {\n    return <Heading {...props} />;\n  }\n\n  if (elementName == \"Gallery\") {\n    return (\n      <div className=\"wiki-gallery\">\n        {props.images.map((e, i) => {\n          return <Element key={i} props={e} />;\n        })}\n      </div>\n    );\n  }\n\n  if (elementName == \"Link\") {\n    let type = props.type;\n    if (type == \"wikiLink\") {\n      return <WikiLink url={props.url} displayText={props.displayText} />;\n    }\n    if (type == \"media\") {\n      const valueImages = React.useContext(ImagesContext);\n\n      if (props && props.url && valueImages && valueImages.images[props.url]) {\n        let float =\n          !props.multipleImage && props?.options?.indexOf(\"left\") > -1\n            ? \"fl-left\"\n            : \"fl-right\";\n        return (\n          <Fragment>\n            <div className={`wiki-img__container ${float}`}>\n              <img\n                id={props.url}\n                className=\"lazyload wiki-img__image\"\n                data-src={valueImages.images[props.url].url}\n              />\n              <div className=\"wiki-img__caption\">\n                {props.caption?.map((e, i) => <Element key={i} props={e} />) ||\n                  \"\"}\n              </div>\n            </div>\n          </Fragment>\n        );\n      }\n    }\n  } else if (elementName == \"Reference\") {\n    if (\n      props.children &&\n      props.children.length &&\n      props.children[0].attribute &&\n      props.children[0].attribute.url\n    ) {\n      return (\n        <sup>\n          <a href={props.children[0].attribute.url}>{props.referenceIndex}</a>\n        </sup>\n      );\n    }\n    return (\n      <sup>\n        <a href={props}>{props.referenceIndex}</a>\n      </sup>\n    );\n  }\n  return JSON.stringify(props);\n};\n","import React, { useState } from \"react\";\nimport { buildURL, summaryParams } from \"./../../../WikiWrapper\";\nimport Skeleton from \"react-loading-skeleton\";\nimport \"./style.sass\";\n\nconst extractSummary = (json, maxchar = 300) => {\n  let content = json.query?.pages,\n    extract = null,\n    title = json.query?.normalized?.[0]?.to;\n  for (const key in content) extract = content[key]?.extract;\n  extract = extract.substr(0, maxchar) + \"...\";\n  return { extract, title };\n};\n\nconst Tooltip = props => {\n  const { url, children } = props;\n  const [show, setShow] = useState(false);\n  const [summary, setSummary] = useState(null);\n  const [title, setTitle] = useState(null);\n  const handleMouseIn = () => setShow(true);\n  const handleMouseOut = () => setShow(false);\n\n  React.useEffect(() => {\n    if (show && !summary) {\n      fetch(buildURL(summaryParams(url)))\n        .then(response => response.json())\n        .then(json => {\n          let { extract, title } = extractSummary(json);\n          setSummary(extract);\n          setTitle(title || url);\n        })\n        .catch(error => console.error(error));\n    }\n  }, [show]);\n\n  return (\n    <span\n      className=\"tooltip\"\n      onMouseOver={handleMouseIn}\n      onMouseLeave={handleMouseOut}\n    >\n      {show && (\n        <div className=\"tooltip-content top\">\n          {title ? (\n            <h3\n              style={{ marginTop: 0, marginBottom: \"5rem\" }}\n              className=\"tooltip-title\"\n            >\n              {title}\n            </h3>\n          ) : (\n            <Skeleton height={100} duration={1} />\n          )}\n          {summary}\n        </div>\n      )}\n\n      {React.Children.toArray(children)}\n    </span>\n  );\n};\n\nexport default Tooltip;\n","import convert from \"convert-units\";\nimport { Global, PairPipe } from \"./elements\";\nimport { analyseHeadings } from \"./analyser\";\nimport {\n  tasteStr,\n  capitalizeFirst,\n  capitalize,\n  trimQuote,\n  clean\n} from \"./utils\";\n\n// var convert = require(\"convert-units\");\nconst UNITS = convert().list();\nconst ABBR_UNITS = convert()\n  .list()\n  .map(unit => unit.abbr);\n\nconst createTextElement = text => ({ elementName: \"Text\", text });\n\nconst CiteParser = plain => {\n  let R_CITE = /\\{\\{cite (?<subType>\\w+)\\s*\\|?(?<remain>[\\S\\s]*)}}$/gi;\n\n  let { subType, remain } = R_CITE.exec(plain).groups;\n\n  let attribute = {};\n\n  for (const pair of remain.split(\"|\")) {\n    let equalIndex = pair.indexOf(\"=\");\n    let [key, value] = [\n      pair.slice(0, equalIndex),\n      pair.slice(equalIndex + 1).trim()\n    ];\n    attribute[key] = value;\n  }\n  return { type: \"cite\", subType, attribute };\n};\n\nconst ConvertParser = plain => {\n  const toMetric = fromUnit => {\n    let res = null;\n    try {\n      for (const toUnit of convert()\n        .from(fromUnit)\n        .possibilities()) {\n        let fromSystem = convert().describe(toUnit).system;\n        if (\"metric\" == fromSystem) res = toUnit;\n      }\n    } catch {\n      return null;\n    }\n    return res;\n  };\n\n  const toAbbr = str => {\n    if (/^?[CF]$/.test(str)) return str;\n    let lower = str.toLowerCase();\n    for (const unit of UNITS) {\n      if (\n        unit.abbr.toLowerCase() == lower ||\n        unit.singular.toLowerCase() == lower ||\n        unit.plural.toLowerCase() == lower\n      )\n        return unit.abbr;\n    }\n    return str;\n  };\n\n  let tokens = plain.slice(2, -2).split`|`,\n    numbers = null,\n    fromUnit,\n    toUnit = null,\n    answer = null;\n\n  tokens.shift();\n\n  numbers = tokens.shift();\n\n  fromUnit = toAbbr(tokens.shift());\n\n  if (/^?C$/.test(fromUnit)) {\n    fromUnit = \"C\";\n    toUnit = \"F\";\n    answer = +numbers / (5 / 9) + 32;\n  } else if (/^?F$/.test(fromUnit)) {\n    fromUnit = \"F\";\n    toUnit = \"C\";\n    answer = (+numbers - 32) * (5 / 9);\n  } else {\n    if (tokens.length && ABBR_UNITS.indexOf(tokens[0]) != -1) {\n      toUnit = tokens.shift();\n    }\n\n    if (!toUnit) toUnit = toMetric(fromUnit);\n    if (numbers && toUnit && fromUnit) {\n      try {\n        answer = convert(+numbers)\n          .from(fromUnit)\n          .to(toUnit);\n      } catch {\n        return {\n          elementName: \"Text\",\n          text: `${numbers} ${fromUnit}`\n        };\n      }\n    }\n  }\n\n  answer = answer ? answer.toFixed(2) : null;\n  if (fromUnit && toUnit && answer !== null) {\n    return {\n      elementName: \"Text\",\n      text: `${numbers} ${fromUnit} (${answer} ${toUnit})`\n    };\n  }\n\n  return {\n    elementName: \"Text\",\n    text: `${numbers} ${fromUnit}`\n  };\n};\n\nconst ReferenceParser = plain => {\n  let refname,\n    refgroup,\n    children,\n    match,\n    remain = plain;\n\n  // 1. Extract tag name\n  const R_HEAD = /^<ref(erences)? *(?<remain>[\\s\\S]*)$/gi;\n  if ((match = R_HEAD.exec(plain)) === null)\n    throw \"Reference Synxtax Error \" + plain;\n\n  remain = match.groups.remain;\n\n  // 2. Try extract refgroup\n  const R_GROUP = /^group *= *(?<refgroup>\\\"[^#\\\"\\'\\/=>\\?\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)\\s*(?<remain>[\\s\\S]*)$/gi;\n  if ((match = R_GROUP.exec(remain)) !== null) {\n    ({ remain, refgroup } = match.groups);\n    refgroup = trimQuote(refgroup);\n  }\n\n  // 3. Try extract refname\n  const R_NAME = /^name *= *(?<refname>\\\"[^#\\\"\\/=>\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)\\s*(?<remain>[\\s\\S]*)$/gi;\n  if ((match = R_NAME.exec(remain)) !== null) {\n    ({ remain, refname } = match.groups);\n    refname = trimQuote(refname);\n  }\n\n  // 4.1. Reuse Reference\n  if (/^\\s*\\/>$/.exec(remain)) {\n    return { type: \"reuse\", refname, refgroup };\n  }\n\n  // 4.2. Firstuse Reference\n  const R_FIRSTUSE = /^>(?<children>[\\s\\S]+)<\\/ref>$/gi;\n  if ((match = R_FIRSTUSE.exec(remain)) === null) {\n    throw \"Firstuse Reference Error \" + remain;\n  }\n\n  children = main(match.groups.children).children;\n  refname = trimQuote(refname);\n  refgroup = trimQuote(refgroup);\n\n  return { type: \"firstuse\", refname, refgroup, children };\n};\n\nconst FootnoteParser = plain => {\n  let match,\n    remain,\n    fnGroup,\n    fnName,\n    subType,\n    children,\n    type = \"footnote\";\n\n  // 1. Extract subType footnote\n  const R_FOOTNOTE = /^\\{\\{(?<subType>[^|]+)\\|(?<remain>[\\S\\s]+)}}$/;\n  if ((match = R_FOOTNOTE.exec(plain)) === null) throw \"Footnote Error\";\n  ({ subType, remain } = match.groups);\n\n  // 2. Extract group footnote\n  const R_GROUP = /^group=(?<fnGroup>\\\"[^#\\\"\\'\\/=>\\?\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)\\|(?<remain>[\\s\\S]+)$/;\n  if ((match = R_GROUP.exec(remain)) !== null) {\n    ({ fnGroup, remain } = match.groups);\n  }\n\n  // 3. Extract name footnote\n  const R_NAME = /^name=(?<fnName>\\\"[^#\\\"\\'\\/=>\\?\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)(\\|(?<remain>[\\s\\S]+))?$/;\n  if ((match = R_NAME.exec(remain)) !== null) {\n    ({ fnName, remain } = match.groups);\n  }\n\n  // 4. Parse real content footnote\n  children = remain ? main(remain).children : [];\n\n  // NOTE: numering foonote will be done in analyseReference function\n  return { type, subType, fnName, fnGroup, children };\n};\n\nconst GalleryParser = plain => {\n  const R_GALLERY = /<gallery\\s*(?<attr>[^>]+)?>(?<content>[\\s\\S]+)<\\/gallery>/gi;\n  let match,\n    attr,\n    content,\n    attributes = {};\n  if ((match = R_GALLERY.exec(plain)) === null)\n    throw \"Gallery Syntax Error\" + plain;\n\n  ({ attr, content } = match.groups);\n\n  const R_PAIR = /\\s*(?<key>\\w+)=(?<value>\\\"[^#\\\"\\'\\/=>\\?\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)/g;\n\n  while ((match = R_PAIR.exec(attr)) !== null) {\n    let { key, value } = match.groups;\n    attributes[key] = trimQuote(value);\n  }\n\n  let images = [];\n  for (let image of content.split(\"\\n\")) {\n    if (/^\\s*$/g.exec(image)) continue;\n    image = /^\\s*([\\s\\S]+)\\s*$/g.exec(image)[0];\n    images.push(main(`[[${image}]]`).children[0]);\n  }\n  return { attributes, images };\n};\n\nconst parsePairPipe = plain => {\n  let res = {},\n    remain = plain,\n    key,\n    nextIndex,\n    parsedPlain,\n    match;\n\n  const R_KEY = /^[\\|\\s]*(?<key>\\w+)\\s*=(?<remain>[\\s\\S]*)$/;\n\n  while (remain) {\n    if ((match = R_KEY.exec(remain)) === null)\n      throw \"Key PairPipe Syntax Error \" + remain;\n    ({ key, remain } = match.groups);\n    key = key.trim();\n    [nextIndex, , parsedPlain] = parse(remain, null, 0, PairPipe);\n    remain = remain.substr(nextIndex);\n\n    let value = parsedPlain;\n    match = /^\\s*(?<value>[\\s\\S]+?)[\\|\\s]*$/.exec(value);\n    if (match === null) throw `Value PairPipe Syntax Error ${value}`;\n    value = match.groups.value;\n    res[key] = value == \"|\" ? \"\" : value;\n  }\n\n  return res;\n};\n\nconst MultipleImageParser = plain => {\n  const R_MULTIPLE_IMAGES = /^\\{\\{multiple image\\s*\\|(?<remain>[\\s\\S]+)}}$/gi;\n\n  let match = R_MULTIPLE_IMAGES.exec(plain),\n    attributes = {},\n    images = [];\n\n  if (match === null) throw \"MultipleImageParser Error \" + plain;\n\n  let { remain } = match.groups;\n\n  let R_KEY_IMAGE = /^\\s*(?<imageKey>[a-z\\-\\_]+)(?<imageID>\\d+)\\s*$/i;\n\n  let pairs = parsePairPipe(remain);\n  // console.log(pairs);\n  for (const key of Object.keys(pairs)) {\n    const value = pairs[key];\n    if ((match = R_KEY_IMAGE.exec(key)) === null) {\n      attributes[key] = value;\n      continue;\n    }\n\n    let { imageKey, imageID } = match.groups;\n    imageID = +imageID - 1;\n    if (images[imageID] === undefined) images.push({});\n    if (\"image\" == imageKey) {\n      images[imageID].url = \"File:\" + value.trim();\n    } else if (\"caption\" == imageKey) {\n      images[imageID].caption = main(value).children;\n    } else images[imageID][imageKey] = value;\n  }\n\n  images = images.map(image => ({\n    elementName: \"Link\",\n    type: \"media\",\n    supType: \"File\",\n    url: image.url,\n    multipleImage: true,\n    options: clean({ ...image, image: null, caption: null, url: null }),\n    caption: image.caption || [{ elementName: \"Text\", text: \"\" }]\n  }));\n\n  return { type: \"multipleImages\", images, attributes };\n};\n\nconst InfoboxParser = plain => {\n  const R_INFO = /^\\{\\{Infobox (?<subtype>[^|]+)\\s*\\|(?<remain>[\\s\\S]+)}}$/gi;\n  let match = R_INFO.exec(plain),\n    subtype,\n    remain,\n    sections = [];\n  if (match === null) throw \"Infobox Syntax Error\" + plain;\n\n  ({ subtype, remain } = match.groups);\n  subtype = subtype.trim();\n\n  for (const section of remain.split`----`)\n    sections.push(parsePairPipe(section));\n\n  return { type: \"Infobox\", subtype, sections };\n};\n\nconst InternalLinkParser = (plain, content) => {\n  let match;\n\n  let R_ARTICLE = /^\\[\\[([^|]+)(\\|([^|]+)?)?\\]\\](\\w+)?$/;\n  if ((match = R_ARTICLE.exec(plain))) {\n    let fullUrl = match[1],\n      nonePipe = !match[2],\n      trailingPipe = match[2] && !match[3],\n      displayText = match[3],\n      suffixStr = match[4] || \"\";\n\n    // console.log({\n    //   fullUrl,\n    //   nonePipe,\n    //   trailingPipe,\n    //   displayText,\n    //   suffixStr\n    // });\n\n    // Manipulate the url\n    let namespace, disambiguation, rootUrl, url;\n\n    //\n    // ^\n    //  ((\\w+):)?   namespace?\n    //  (\n    //      ([\\w\\-,. ]+)( \\((.+)\\))  commas has priority over parantheses\n    //    |\n    //      ([\\w\\-. ]+)\n    //      (\n    //          \\((.+)\\)          trailing parentheses\n    //        |\n    //          , (.+)            trailing comma\n    //      )?\n    //  )\n    // $\n\n    // let urlMatch = /^(:?(\\w+):)?\n    // (\n    //   ([\\w\\-,.#\\\"\\(\\) ]+)( \\((.+)\\))\n    //   |\n    //   ([\\w\\-.#\\\"\\(\\) ]+)( \\((.+)\\)|, (.+))?\n    // )$/.exec(\n    //   fullUrl\n    // );\n    // ([\\w\\-,.#\\\"\\(\\) ]+)( \\((.+)\\))\n\n    let urlMatch = /^(:?(\\w+):)?(([^\\(]+)( \\((.+)\\))|([^,(]+)( \\((.+)\\)|, (.+))?|([\\s\\S]*))$/.exec(\n      fullUrl\n    );\n\n    if (urlMatch === null) {\n      // console.log(\"@\");\n      return content;\n    }\n    namespace = capitalize(urlMatch[1] || \"\");\n    rootUrl = urlMatch[4] || urlMatch[7] || urlMatch[11];\n    disambiguation = urlMatch[5] || urlMatch[8] || \"\";\n\n    if (\"File:\" != namespace) {\n      url = namespace + capitalizeFirst(rootUrl) + disambiguation;\n      url = url.replace(/ /g, \"_\"); // convert to valid URL\n      displayText = nonePipe ? fullUrl : trailingPipe ? rootUrl : displayText;\n\n      if (suffixStr) {\n        displayText += suffixStr;\n      }\n\n      displayText = [{ elementName: \"Text\", text: displayText }];\n      return {\n        type: \"wikiLink\",\n        url,\n        displayText\n      };\n    }\n  }\n\n  // For handling format like:\n  // [[File:Gatera de ademuz.jpg|thumb|left|A ''{{lang|es|gatera}}''\n  // in [[Rincn de Ademuz]]\n\n  let chunks = plain.slice(2, -2).split(\"|\");\n  let first = chunks[0];\n  let R_MEDIA = /^(File|Image|Media):(.*)$/i;\n  if ((match = R_MEDIA.exec(first))) {\n    let type = \"media\",\n      supType = capitalizeFirst(match[1]),\n      rootUrl = capitalizeFirst(match[2]),\n      url = `${supType}:${rootUrl}`;\n    let meta = { type, supType, url },\n      options = [],\n      caption = [];\n    let R_OPTION = /^(border|frame(less)?|thumb(nail)?|((\\d+)?x)?\\d+px|upright[ =]\\d+\\.\\d+|upright=?|left|right|cent(er|re)|none|baseline|sub|super|top|text-top|middle|bottom|text-bottom|(alt|page|class|lang|link)=.+)$/i,\n      R_ATTRIBUTE = /^(alt|page|class|lang|link)=(.*$)/i;\n\n    for (const chunk of chunks.slice(1)) {\n      // console.log(chunk);\n      if (!R_OPTION.test(chunk)) {\n        caption.push(chunk);\n        continue;\n      }\n\n      let match;\n      if ((match = R_ATTRIBUTE.exec(chunk))) {\n        options.push({ key: match[1], value: match[2] });\n      } else options.push(chunk);\n    }\n\n    caption = main(caption.join(\"|\")).children;\n    return { ...meta, options, caption };\n  }\n  // throw new Error(\"Internal Link Syntax Error\" + plain);\n  return { children: content };\n};\n\nconst TemplateParser = plain => {\n  if (/^{{convert/i.test(plain)) return ConvertParser(plain);\n\n  if (/^{{multiple image/i.test(plain)) return MultipleImageParser(plain);\n\n  if (/^{{Infobox \\w+/i.test(plain)) return InfoboxParser(plain);\n\n  if (/^{{cite/i.test(plain)) return CiteParser(plain);\n\n  if (/^{{(refn|efn|sfn|efn-\\w{2})\\|/i.test(plain))\n    return FootnoteParser(plain);\n\n  if (/^{{lang-\\w+\\|/i.test(plain)) {\n    let text = /\\|(.*)}}$/.exec(plain)[1];\n    return {\n      elementName: \"Italic\",\n      children: [createTextElement(text)]\n    };\n  }\n\n  if (/^{{IPAc?-\\w+\\|/gi.test(plain)) {\n    let text = /\\|(.*)}}$/.exec(plain)[1];\n    return createTextElement(\"[\" + text + \"]\");\n  }\n\n  return {\n    type: \"N/A\",\n    children: [{ elementName: \"Text\", text: \"N/A\" }]\n  };\n};\n\nconst ExternalLinkParer = plain => {\n  const R_EXTERNAL = /^\\[(?<url>\\S+)( (?<displayText>[\\s\\S]+))?\\]$/gi;\n  let url,\n    displayText,\n    match = R_EXTERNAL.exec(plain);\n\n  if (match === null) throw new Error(\"ExternalLink Syntax Error\");\n  ({ url, displayText } = match.groups);\n  return { url, displayText };\n};\n\nconst internalParse = (element, content, plain) => {\n  let { elementName } = element;\n\n  if (elementName == \"Reference\") return ReferenceParser(plain);\n\n  if (elementName == \"Gallery\") return GalleryParser(plain);\n\n  if (elementName == \"Link\") return InternalLinkParser(plain, content);\n\n  if (elementName == \"Template\") return TemplateParser(plain);\n\n  if (elementName == \"ExternalLink\") return ExternalLinkParer(plain);\n\n  return { children: content };\n};\n\nconst parse = (\n  str,\n  strlen,\n  index,\n  targetElement,\n  opts = { headings: true }\n) => {\n  let buffer = \"\",\n    has,\n    plain = \"\",\n    nextElement,\n    content = [],\n    options = {},\n    referenceIndex = 0,\n    images = [],\n    headings = [],\n    nextPlain,\n    hasSelfClose;\n\n  strlen = strlen === null ? str.length : strlen;\n  let { elementName, startToken, endToken, allowedChildren } = targetElement;\n  index += startToken === null ? 0 : startToken.length;\n  plain += startToken === null ? \"\" : startToken;\n\n  while (index < strlen) {\n    hasSelfClose = false;\n    has = false;\n    for (const matchElement of allowedChildren) {\n      if (!tasteStr(str, matchElement.startToken, index)) continue;\n      has = true;\n      if (buffer) content.push(createTextElement(buffer));\n      buffer = \"\";\n\n      if ((hasSelfClose = matchElement.selfClose)) {\n        content.push({ elementName: matchElement.elementName });\n        plain += matchElement.startToken;\n        index += matchElement.startToken.length;\n        break;\n      }\n\n      [index, nextElement, nextPlain] = parse(str, strlen, index, matchElement);\n      plain += nextPlain;\n      content.push(nextElement);\n\n      if (matchElement.elementName == \"Reference\")\n        nextElement.referenceIndex = ++referenceIndex;\n\n      if (/^Heading/.exec(nextElement.elementName) !== null)\n        headings.push(nextElement);\n\n      if (\n        nextElement.elementName == \"Link\" &&\n        nextElement.type == \"media\" &&\n        nextElement.supType == \"File\"\n      )\n        images.push(nextElement);\n\n      if (nextElement.elementName == \"Gallery\")\n        images.push(...nextElement.images);\n\n      break;\n    }\n\n    if (hasSelfClose) continue;\n\n    if (!has) {\n      if (endToken) {\n        let catchEndToken = false;\n        for (const eToken of endToken) {\n          if (tasteStr(str, eToken, index)) {\n            catchEndToken = true;\n            index += eToken.length;\n            plain += eToken;\n\n            if (targetElement.elementName == \"Link\") {\n              while (index < strlen) {\n                let nowiki = \"<nowiki />\";\n                if (tasteStr(str, nowiki, index)) {\n                  index += nowiki.length;\n                  break;\n                } else if (/\\w/.test(str[index])) {\n                  plain += str[index++];\n                } else break;\n              }\n            }\n          } // end tasteStr\n        } // end for endToken\n        if (catchEndToken) break;\n      } // end if endToken\n\n      if (index < strlen) {\n        plain += str[index];\n        buffer += str[index++];\n      }\n    } // end not has\n  }\n\n  if (buffer) content.push(createTextElement(buffer));\n\n  let res = [\n    index,\n    clean({\n      elementName,\n      headings: opts.headings ? analyseHeadings(headings) : null,\n      images,\n      ...internalParse(targetElement, content, plain, options)\n    }),\n    plain\n  ];\n\n  return res;\n};\n\nconst main = (str, opts) => (str ? parse(str, null, 0, Global, opts)[1] : \"\");\n\nexport { main, clean, trimQuote };\n","const analyseHeadings = headings => {\n  if (!headings.length) return null;\n  let getLevel = heading => +/^Heading(\\d)$/.exec(heading.elementName)[1];\n  let currentLevel = 0,\n    res = {},\n    currentHeading = res;\n\n  res.indices = [];\n\n  for (const heading of headings) {\n    let level = getLevel(heading),\n      headingText = heading.children[0].text.trim(),\n      headingId = headingText.replace(/\\s/, \"\") + \"_\" + level;\n\n    // add metadata\n    heading.level = level;\n    heading.text = headingText;\n    heading.id = headingId;\n    heading.className = \"wiki-heading-\" + level;\n    heading.indices = currentHeading.indices.slice();\n\n    // connect heading to heading tree\n    if (level > currentLevel) {\n      heading.indices.push(1);\n\n      if (!currentHeading.childrenHeadings)\n        currentHeading.childrenHeadings = [];\n      heading.parentHeading = currentHeading;\n      currentHeading.childrenHeadings.push(heading);\n    } else if (level == currentLevel) {\n      heading.indices[heading.indices.length - 1]++;\n\n      let parent = currentHeading.parentHeading;\n      parent.childrenHeadings.push(heading);\n      heading.parentHeading = parent;\n    } else {\n      heading.indices = heading.indices.slice(0, level);\n      heading.indices[heading.indices.length - 1]++;\n\n      let grandParent = currentHeading.parentHeading.parentHeading;\n      grandParent.childrenHeadings.push(heading);\n      heading.parentHeading = grandParent;\n    }\n    currentHeading = heading;\n    currentLevel = level;\n  }\n  return res;\n};\n\nexport { analyseHeadings };\n","import React from \"react\";\nimport SearchIcon from \"./../../../asset/images/search.svg\";\nimport ProfileIcon from \"./../../../asset/images/profile.svg\";\nimport \"./style.sass\";\n\nconst Menu = () => {\n  return (\n    <div className=\"menu\">\n      <div className=\"menu__left\">\n        <span className=\"logo-wiki\">Wiki</span>\n        <span className=\"logo-pedia\">pedia</span>\n      </div>\n      <div className=\"menu__main\">\n        <button className=\"menu__button button--choose\">Article</button>\n        <button className=\"menu__button\">Talk</button>\n        <button className=\"menu__button button--choose\">Read</button>\n        <button className=\"menu__button\">View source</button>\n        <button className=\"menu__button\" id=\"theme-switch\">\n          Change theme\n        </button>\n      </div>\n      <div className=\"menu__search-icon\">\n        <SearchIcon />\n      </div>\n      <div className=\"menu__right\">\n        <input\n          type=\"text\"\n          placeholder=\"Search Wikipedia\"\n          className=\"menu__search-input\"\n        />\n        <div className=\"menu__profile-icon\">\n          <ProfileIcon />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Menu;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.607 192.803l62.401-62.402c13.063 10.67 29.263 16.475 46.356 16.475h.002c19.614 0 38.058-7.639 51.927-21.509 13.871-13.87 21.511-32.313 21.51-51.931-.001-19.616-7.64-38.058-21.509-51.928C157.425 7.639 138.982 0 119.365 0 99.749 0 81.307 7.639 67.437 21.509 53.565 35.38 45.927 53.823 45.928 73.44c0 17.094 5.805 33.294 16.475 46.355L0 182.197l10.607 10.606zM60.928 73.44c-.001-15.611 6.078-30.287 17.116-41.324C89.081 21.078 103.756 15 119.365 15c15.61 0 30.285 6.078 41.322 17.115s17.116 25.712 17.116 41.322c0 15.611-6.078 30.286-17.116 41.324-11.037 11.038-25.712 17.116-41.321 17.116-15.61-.001-30.286-6.079-41.323-17.116C67.006 103.724 60.928 89.05 60.928 73.44z\"\n});\n\nfunction SvgSearch(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 192.804 192.804\"\n  }, props), _ref);\n}\n\nexport default SvgSearch;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M100.594.002C45.119.002 0 45.12 0 100.593c0 55.469 45.122 100.591 100.598 100.591 55.465 0 100.587-45.122 100.587-100.591C201.182 45.12 156.059.002 100.594.002zm-27.5 81.469l.204-.225c.82-.598 1.22-1.528 1.07-2.505-2.029-12.19-.698-17.272-.251-18.546C77.66 49.33 88.769 44.301 90.952 43.414a11.093 11.093 0 012.19-.576l.258-.057 1.789-.097.014.111.412-.039c.372-.039.723-.093 1.163-.183l.394-.086c.351.004 4.678.551 11.102 2.523l4.466 1.539c8.167 2.412 11.928 6.904 12.623 7.805 6.539 7.412 4.792 18.599 3.167 24.608a2.509 2.509 0 00.329 2.044l.372.458c.476.644.898 3.128-.523 8.407-.268 1.6-.859 2.902-1.739 3.783a2.573 2.573 0 00-.637 1.321c-2.208 12.963-13.825 27.461-26.065 27.461-10.386 0-22.243-13.342-24.376-27.45a2.575 2.575 0 00-.669-1.389c-.891-.916-1.453-2.244-1.797-4.209-1.025-3.705-1.132-6.679-.331-7.917zM49.778 137.68c.451-.573 2.96-3.514 8.042-5.451 4.466-1.374 15.504-5.039 21.541-9.416.283-.154.562-.444.791-.684a49.053 49.053 0 012.423-2.459l.562-.533.573.537c5.315 5.014 11.198 7.763 16.559 7.763 5.637 0 11.452-2.441 16.821-7.061l.422-.365 1.138.555c1.016.934 2.781 2.215 3.6 2.609l1.045.508-.107.115.465.283a44.004 44.004 0 003.335 1.804c1.278.562 2.344.981 3.454 1.342.93.301 5.898 1.972 11.549 4.585l1.077.322c5.522 2.115 7.977 5.053 8.224 5.361 6.553 9.72 9.072 27.854 10.006 37.961-17.128 13.911-38.677 21.57-60.697 21.57-22.035 0-43.587-7.662-60.708-21.573.917-10.076 3.411-28.156 9.885-37.773zm105.705-2.985l-.347-.404c-1.632-2.033-5.222-4.899-10.443-6.9l-.823-.247a117.918 117.918 0 00-11.757-4.645l-.14.412.036-.444a32.672 32.672 0 01-2.874-1.127c-5.952-2.924-6.71-4.627-6.839-5.021l-.297-.676.261-.616c4.474-5.583 7.612-12.086 8.815-18.213l.15-.372c1.26-1.575 2.054-3.436 2.369-5.476 1.417-5.128 1.485-8.904.2-11.535l-.122-.268.068-.293c1.589-6.642 3.114-19.097-4.513-27.754-1.206-1.525-5.826-6.685-14.956-9.359l-4.438-1.525c-7.383-2.273-12-2.766-12.601-2.77-.497 0-.913.047-1.539.193l-.587.1a6.652 6.652 0 00-.998-.072c-2.358 0-4.914 1.02-5.035 1.063-2.555 1.07-15.543 7.065-19.655 19.791-.676 1.8-2.076 7.301-.279 19.344l.057.34-.211.283c-1.847 2.477-1.99 6.506-.444 11.921.39 2.398 1.174 4.313 2.337 5.766l.2.429c1.124 6.292 3.926 12.515 8.099 17.991l.361.487-.329.49c-.179.251-.308.53-.351.73-1.031 2.931-12.544 8.07-22.647 11.159-7.383 2.791-10.508 7.258-10.508 7.258-6.259 9.291-9.126 24.923-10.44 36.723-19.787-18.245-31.104-44.023-31.104-70.865 0-53.171 43.258-96.429 96.436-96.429 53.171 0 96.436 43.258 96.436 96.429 0 26.845-11.334 52.634-31.122 70.89-1.346-11.89-4.245-27.586-10.426-36.788z\",\n  fill: \"#010002\"\n});\n\nfunction SvgProfile(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 201.185 201.185\"\n  }, props), _ref);\n}\n\nexport default SvgProfile;","import React, { useRef } from \"react\";\nimport LeftButton from \"./../../../asset/images/left.svg\";\nimport RightButton from \"./../../../asset/images/right.svg\";\nimport \"./style.sass\";\n\nconst Navigation = ({ headings }) => {\n  const headingsRef = useRef(null);\n\n  const handle = direction => {\n    let width = headingsRef.current.scrollWidth;\n    let pos = headingsRef.current.scrollLeft;\n    let visibleWidth = headingsRef.current.clientWidth;\n    let maxPos = width - visibleWidth;\n    let slideWidth = maxPos * 0.15;\n\n    // console.log({ width, pos, visibleWidth, maxPos });\n    console.log(document.querySelector(\".navigation__headings:nth-child(1)\"));\n    headingsRef.current.scrollLeft =\n      direction == \"right\"\n        ? Math.min(maxPos, pos + slideWidth)\n        : Math.max(0, pos - slideWidth);\n  };\n\n  const handle2 = id => {\n    let heading = document.getElementById(id);\n    let button = document.getElementById(id + \"__btn\");\n    let navigation = document.getElementsByClassName(\"navigation__headings\")[0];\n    let [buttonWidth, buttonPosition] = [button.offsetWidth, button.offsetLeft];\n\n    let [navigationClientWidth, navigationScrollLeft] = [\n      navigation.clientWidth,\n      navigation.scrollLeft\n    ];\n\n    let buttonMin = buttonPosition,\n      buttonMax = buttonPosition + buttonWidth;\n    let windowMin = navigationScrollLeft,\n      windowMax = navigationScrollLeft + navigationClientWidth;\n\n    if (buttonMin > windowMax || buttonMax < windowMin) {\n      console.log(\"out of bound\");\n    } else if (buttonMin >= windowMin && buttonMax <= windowMax) {\n      console.log(\"entire\");\n    } else {\n      let delta = buttonWidth * 0.5;\n      if (buttonMin < windowMin) {\n        delta += windowMin - buttonMin;\n        navigation.scrollLeft -= delta;\n      } else {\n        delta += buttonMax - windowMax;\n        navigation.scrollLeft += delta;\n      }\n    }\n\n    let body = document.body;\n    body.scrollTop =\n      heading.offsetTop -\n      document.getElementsByClassName(\"menu\")[0].offsetHeight;\n  };\n  return (\n    <div className=\"navigation\">\n      <div className=\"navigation__content\">\n        <button\n          onClick={() => handle(\"left\")}\n          className=\"navigation__button navigation__left-button\"\n        >\n          <LeftButton />\n        </button>\n        <div ref={headingsRef} className=\"navigation__headings\">\n          {headings?.childrenHeadings.map((heading, index) => {\n            return (\n              <button\n                key={index}\n                onClick={() => handle2(heading.id)}\n                id={heading.id + \"__btn\"}\n              >\n                {heading.text}\n              </button>\n            );\n          })}\n        </div>\n        <button\n          onClick={() => handle(\"right\")}\n          className=\"navigation__button navigation__right-button\"\n        >\n          <RightButton />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Navigation;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 0C114.833 0 0 114.833 0 256s114.833 256 256 256 256-114.833 256-256S397.167 0 256 0zm0 490.667C126.604 490.667 21.333 385.396 21.333 256S126.604 21.333 256 21.333 490.667 126.604 490.667 256 385.396 490.667 256 490.667z\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M306.208 131.125c-4.167-4.167-10.917-4.167-15.083 0L173.792 248.458c-4.167 4.167-4.167 10.917 0 15.083l117.333 117.333a10.634 10.634 0 007.542 3.125c2.729 0 5.458-1.042 7.542-3.125 4.167-4.167 4.167-10.917 0-15.083L196.417 256l109.792-109.792c4.166-4.166 4.166-10.916-.001-15.083z\"\n});\n\nfunction SvgLeft(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"left_svg__navigation__icon left_svg__icon-left\",\n    viewBox: \"0 0 512 512\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgLeft;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 0C114.833 0 0 114.833 0 256s114.833 256 256 256 256-114.833 256-256S397.167 0 256 0zm0 490.667C126.604 490.667 21.333 385.396 21.333 256S126.604 21.333 256 21.333 490.667 126.604 490.667 256 385.396 490.667 256 490.667z\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M220.875 131.125c-4.167-4.167-10.917-4.167-15.083 0-4.167 4.167-4.167 10.917 0 15.083L315.583 256 205.792 365.792c-4.167 4.167-4.167 10.917 0 15.083a10.634 10.634 0 007.542 3.125c2.729 0 5.458-1.042 7.542-3.125l117.333-117.333c4.167-4.167 4.167-10.917 0-15.083L220.875 131.125z\"\n});\n\nfunction SvgRight(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"right_svg__navigation__icon right_svg__icon-right\",\n    viewBox: \"0 0 512 512\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgRight;"],"sourceRoot":""}